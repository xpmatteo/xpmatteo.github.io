<!DOCTYPE html>
<html>


<!-- Mirrored from matteo.vaccari.name/blog/page/6 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 24 Sep 2021 10:31:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="initial-scale=1">

<title>Extreme Enthusiasm  </title>

<meta name="generator" content="WordPress 5.1.1" /> <!-- leave this for stats -->

<link rel="stylesheet" href="../wp-content/themes/mv2/style.css" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="Extreme Enthusiasm RSS Feed" href="../feed" />
<link rel="pingback" href="../xmlrpc.php" />

<link rel='dns-prefetch' href='http://s.w.org/' />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11.2.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11.2.0\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/matteo.vaccari.name\/blog\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.1.1"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='wp-block-library-css'  href='../wp-includes/css/dist/block-library/style.min3c21.css?ver=5.1.1' type='text/css' media='all' />
<link rel='https://api.w.org/' href='../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.1.1" />
</head>
<body>
<div id="page">

<div id="header">
	<h1><a href="../../blog">Extreme Enthusiasm</a></h1>
</div>

<div id='maincontent'>
  <p class='mobile-quicklink'><a href="#right-col">Navigation</a></p>
  <div id='main-col'>
  	
  		
  			<div class="post" id="post-602">
  				<h2><a href="../archives/602.html" rel="bookmark" title="Permanent Link to Design by Contract vs. Test-Driven Development">Design by Contract vs. Test-Driven Development</a></h2>
  				<small>May 28th, 2011 <!-- by matteo --></small>

  				<div class="entry">
  					<p>A great many years ago I was fascinated by Bertrand Meyer&#8217;s book &#8220;Object Oriented Program Construction.&#8221;  One of the many remarkable things in that book is the idea of &#8220;Design By Contract&#8221;, where you specify what a method does by means of a logical pre&ndash; and post&ndash;condicion.  Consider the square root function:</p>
<pre>
  pre: x &ge; 0
  post: abs(y*y - x) &lt; epsilon
</pre>
<p>This is a very good specification:</p>
<ul>
<li>It&#8217;s efficiently executable.</li>
<li>The intent is clear.</li>
<li>Gives no hint about how to implement it, i.e., it does not contain design ideas.</li>
</ul>
<p>Now I&#8217;m reading the <a href="http://leansoftwareengineering.com/ksse/scrum-ban/" title="Scrum-ban | Lean Software Engineering">Scrumban</a> book by Corey Ladas.  One thing Corey says is that Test-Driven Development is good, but not as good as Design By Contract; in fact, he says, TDD might be a stepping stone to DBC.  </p>
<p> <a href="../archives/602.html#more-602" class="more-link">Read the rest of this entry &raquo;</a></p>
  				</div>

  				<p class="postmetadata">Posted in <a href="../archives/category/agile.html" rel="category tag">Agile</a>, <a href="../archives/category/essay.html" rel="category tag">Essay</a> |   <a href="../archives/602.html#comments">16 Comments &#187;</a></p>
  			</div>

  		
  			<div class="post" id="post-593">
  				<h2><a href="../archives/593.html" rel="bookmark" title="Permanent Link to Feeling like carrying bags of sand">Feeling like carrying bags of sand</a></h2>
  				<small>May 22nd, 2011 <!-- by matteo --></small>

  				<div class="entry">
  					<h3>A dreary afternoon</h3>
<p>A while ago I&nbsp;was in the office, while the team was busy programming.  I&nbsp;heard one of the developers typing with some intensity, and puffing.  &#8220;What are you working on?&#8221; &mdash; I&nbsp;asked. &mdash;   &#8220;I&#8217;m working on this administration panel.  And it&#8217;s  darned tiresome work!!&#8221;</p>
<p>So I&nbsp;started observing him.   <a href="../archives/593.html#more-593" class="more-link">Read the rest of this entry &raquo;</a></p>
  				</div>

  				<p class="postmetadata">Posted in <a href="../archives/category/agile.html" rel="category tag">Agile</a> |   <a href="../archives/593.html#comments">1 Comment &#187;</a></p>
  			</div>

  		
  			<div class="post" id="post-590">
  				<h2><a href="../archives/590.html" rel="bookmark" title="Permanent Link to The real meaning of &#8220;Technical Debt&#8221;">The real meaning of &#8220;Technical Debt&#8221;</a></h2>
  				<small>May 18th, 2011 <!-- by matteo --></small>

  				<div class="entry">
  					<p>Ron Jeffries on the Software Craftmanship mailing list <a href="http://groups.google.com/group/software_craftsmanship/msg/cd38bfa949c64d50">recently wrote this</a>:</p>
<blockquote><p>
We write a test showing what we intend to accomplish, and a few<br />
minutes later, we have accomplished it. If doing that has made the<br />
design not quite as nice as it was before we started, we evolve the<br />
design in place to keep it good.</p>
<p>The more we practice this, the easier it gets and the better we get<br />
at it.</p>
<p>That said, there will always be times when our design ideas come too<br />
late for immediate inclusion but they are still desirable to put<br />
into the program. This is the original meaning of &#8220;technical debt&#8221;,<br />
the deviation of the code now from what we understand of the<br />
desirable design now.
</p></blockquote>
<p>I find it very clear&#8230; this explains that &#8220;technical debt&#8221; does not mean &#8220;code like hell, make a mess, hope for the best, we&#8217;ll fix it later&#8230;&#8221;.  It means that, assuming I always write clean code, which means write as good code as I can, it can happen that I get an idea about how the code *should have been* organized.  That may take days to do, so I don&#8217;t do it at once.  It remains as a &#8220;debt&#8221; I will pay some day.</p>
<p>This also means that design debt is not immediately visible!  It&#8217;s in the mind of people who worked for months with a project and finally got an insight.  The kind of <a href="../archives/511.html">refactorings I suggested earlier</a> might be an example of technical debt.</p>
  				</div>

  				<p class="postmetadata">Posted in <a href="../archives/category/agile.html" rel="category tag">Agile</a> |   <a href="../archives/590.html#respond">No Comments &#187;</a></p>
  			</div>

  		
  			<div class="post" id="post-571">
  				<h2><a href="../archives/571.html" rel="bookmark" title="Permanent Link to Anti-FOR tips from the Yahtzee Kata">Anti-FOR tips from the Yahtzee Kata</a></h2>
  				<small>May 14th, 2011 <!-- by matteo --></small>

  				<div class="entry">
  					<p>Again on the <a href="http://codingdojo.org/cgi-bin/wiki.pl?KataYahtzee" title="Coding Dojo Wiki: KataYahtzee">Kata Yahtzee</a>, that I <a href="../archives/311.html" title="Extreme Enthusiasm  &raquo; Blog Archive   &raquo; Report of the first run of the OCP kata">blogged about</a> some time ago.</p>
<p>If you have not solved the kata at least once, please stop reading this!  Get back when you have.</p>
<p><center><br />
  *&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br />
  *<br />
</center></p>
<p>Good to see you again!  Now that you solved it, you probably know that the naive solution takes many &#8220;for&#8221; loops.  Let <em>D</em> be the player dice, represented as <em>an array of die results</em>, e.g., D=(1,6,1,6,4). The naive rules for sixes would be</p>
<p><code></p>
<pre name="code" class="ruby:nogutter:nocontrols">
    def sixes_score 
      sum = 0
      for d in D
        if d == 6
          sum += 6
        end
      end
      return sum
    end
  </pre>
<p></code></p>
<p>This solution involves <em>searching</em> for sixes and adding up.  Why do we need to search?  We need to search because there are many different D that are worth exactly the same for the sixes rule.  For instance, both D=(1,2,3,6,6) and D=(6,6,1,2,3) are worth 12.</p>
<p> <a href="../archives/571.html#more-571" class="more-link">Read the rest of this entry &raquo;</a></p>
  				</div>

  				<p class="postmetadata">Posted in <a href="../archives/category/agile.html" rel="category tag">Agile</a>, <a href="../archives/category/design-exercise.html" rel="category tag">Design Exercise</a>, <a href="../archives/category/essay.html" rel="category tag">Essay</a>, <a href="../archives/category/expressive-code.html" rel="category tag">Expressive Code</a> |   <a href="../archives/571.html#respond">No Comments &#187;</a></p>
  			</div>

  		
  			<div class="post" id="post-554">
  				<h2><a href="../archives/554.html" rel="bookmark" title="Permanent Link to Accit 2011 (Agile Coach Camp Italy)  report">Accit 2011 (Agile Coach Camp Italy)  report</a></h2>
  				<small>May 14th, 2011 <!-- by matteo --></small>

  				<div class="entry">
  					<p>Some notes on what I took home from the <a href="http://accitaly.wordpress.com/" title="Agile Coach Camp Italy 2011">Agile Coach Camp Italy 2011</a>, that happened in a <a href="http://www.lacasella.it/">beautiful country resort</a> in Umbria from 6 to 8 May.</p>
<p><a href="../wp-content/uploads/2011/05/P1060533.jpg"><img src="../wp-content/uploads/2011/05/P1060533-300x225.jpg" alt="" title="Umbria" width="300" height="225" class="alignnone size-medium wp-image-559" srcset="http://matteo.vaccari.name/blog/wp-content/uploads/2011/05/P1060533-300x225.jpg 300w, http://matteo.vaccari.name/blog/wp-content/uploads/2011/05/P1060533-1024x768.jpg 1024w, http://matteo.vaccari.name/blog/wp-content/uploads/2011/05/P1060533.jpg 1280w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>The session &#8220;What is a coach&#8221; facilitated by <a href="http://twitter.com/andreaprovaglio">Andrea Provaglio</a>, for a sampling of how coaches think and what they do.</p>
<p>The session on &#8220;Agile ceremonies in distributed teams&#8221;, facilitated by <a href="http://twitter.com/#!/IlIlIIlIlIlIlII">Sven Tiffe</a>, for tips and real-life tales.</p>
<p>The session &#8220;Coaching Dojo&#8221;, facilitated by <a href="http://twitter.com/#!/ojuncu">Oana Juncu</a>, where novice coaches practice problem solving by asking questions.</p>
<div style="text-align: right">
  <a href="../wp-content/uploads/2011/05/P1060464.jpg"><img src="../wp-content/uploads/2011/05/P1060464-300x225.jpg" alt="" title="Pierluigi" width="300" height="225" class="alignnone size-medium wp-image-561" srcset="http://matteo.vaccari.name/blog/wp-content/uploads/2011/05/P1060464-300x225.jpg 300w, http://matteo.vaccari.name/blog/wp-content/uploads/2011/05/P1060464-1024x768.jpg 1024w, http://matteo.vaccari.name/blog/wp-content/uploads/2011/05/P1060464.jpg 1280w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
</div>
<p>The session about ALE Italy, again by Andrea, where we shared ideas and vision about a shared idea of Agile and Lean in Europe.  In particular the idea of sharing &#8220;Status of Agile in my Country&#8221; reports.</p>
<p>The session about Conceptualizations by <a href="http://twitter.com/#!/p_pugliese">Pierluigi Pugliese</a>, that introduced some strategic-level models for deciding how and if to introduce change in an organization.</p>
<p>The session about &#8220;A3 Thinking&#8221; by <a href="http://twitter.com/#!/agilesensei" >Claudio Perrone</a>, showing that problem solving is a structured activity that can be taught and learned.</p>
<p>The session &#8220;Becoming a Coach&#8221;, organized by <a href="http://twitter.com/#!/theviki">Vittorio Scibetta</a>, where accomplished coaches shared their thoughts on things that shaped their coaching and how to learn about coaching.</p>
<p>The coding dojo where <a href="http://twitter.com/#!/ziobrando">Alberto Brandolini</a> practiced the art of maintaining focus while a chattering crowd of &#8220;umarell&#8221; (*) was teasing and criticizing him!</p>
<p><a href="../wp-content/uploads/2011/05/P1060507.jpg"><img src="../wp-content/uploads/2011/05/P1060507-300x225.jpg" alt="" title="Sunday" width="300" height="225" class="alignnone size-medium wp-image-568" srcset="http://matteo.vaccari.name/blog/wp-content/uploads/2011/05/P1060507-300x225.jpg 300w, http://matteo.vaccari.name/blog/wp-content/uploads/2011/05/P1060507-1024x768.jpg 1024w, http://matteo.vaccari.name/blog/wp-content/uploads/2011/05/P1060507.jpg 1280w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>Now it&#8217;s clear to me that being an agile coach involves more than knowing TDD.  If you want to be an &#8220;agile coach&#8221;, there&#8217;s a lot to learn about the &#8220;coach&#8221; part in addition to the &#8220;agile&#8221; part.</p>
<p>This was the first &#8220;unconference&#8221; I attended.  In this kind of conference, also known as an &#8220;open space&#8221;, the program is not prepared beforehand; rather, the organizers provide a structure, such as blank timetables, rooms and materials, and by a process called &#8220;marketplace&#8221; the participants prepare the program on the spot.  It was great!  I learned so much.  In this case the openspace organizer was Pierluigi, who spent a lot of care and attention to detail to make it work smoothly.</p>
<p>I also was impressed by the good energy of participants; lots of games, laughs and smiles.  It&#8217;s been a very good place to be.</p>
<div style="text-align: right">
  <a href="../wp-content/uploads/2011/05/P1060551.jpg"><img src="../wp-content/uploads/2011/05/P1060551-300x225.jpg" alt="" title="Retrospective" width="300" height="225" class="alignnone size-medium wp-image-558" srcset="http://matteo.vaccari.name/blog/wp-content/uploads/2011/05/P1060551-300x225.jpg 300w, http://matteo.vaccari.name/blog/wp-content/uploads/2011/05/P1060551-1024x768.jpg 1024w, http://matteo.vaccari.name/blog/wp-content/uploads/2011/05/P1060551.jpg 1280w" sizes="(max-width: 300px) 100vw, 300px" /></a>
</div>
<p>(*) In Bologna, &#8220;umarell&#8221; is someone with time on his hands who watches workers in roadworks and offers criticism :-)</p>
  				</div>

  				<p class="postmetadata">Posted in <a href="../archives/category/agile.html" rel="category tag">Agile</a> |   <a href="../archives/554.html#respond">No Comments &#187;</a></p>
  			</div>

  		
  			<div class="post" id="post-552">
  				<h2><a href="../archives/552.html" rel="bookmark" title="Permanent Link to Intervento al Novara-XPUG">Intervento al Novara-XPUG</a></h2>
  				<small>April 12th, 2011 <!-- by matteo --></small>

  				<div class="entry">
  					<p>Lunedì 18 aprile sono invitato dagli amici del Novara XPUG per una presentazione.  Parlerò di &#8220;planning patterns and antipatterns&#8221;, una presentazione che ho proposto anche a Better Software 2011 e che conto di rodare in questa occasione :o)</p>
<p>Le informazioni sono su <a href="http://www.gallug.it/">www.gallug.it</a> .  L&#8217;indirizzo è</p>
<p>Viale Beato Quagliotti, 1<br />
28066 &#8211; Galliate (NO) &#8211; Italy</p>
  				</div>

  				<p class="postmetadata">Posted in <a href="../archives/category/agile.html" rel="category tag">Agile</a> |   <a href="../archives/552.html#respond">No Comments &#187;</a></p>
  			</div>

  		
  			<div class="post" id="post-546">
  				<h2><a href="../archives/546.html" rel="bookmark" title="Permanent Link to We don&#8217;t have time for tests">We don&#8217;t have time for tests</a></h2>
  				<small>March 26th, 2011 <!-- by matteo --></small>

  				<div class="entry">
  					<blockquote><p>
At lunch I had the familiar conversation about how TDD/pairing are fine unless you&#8217;re under pressure to deliver, and then &#8230;. you just do whatever it takes. Well, if you don&#8217;t think TDD/pairing are &#8220;what it takes,&#8221; then why do you /ever/ work that way?<br />
<cite><a href="http://twitter.com/#!/davenicolette/status/51332072576528384">Dave</a> <a href="http://twitter.com/#!/davenicolette/status/51332180269465600">Nicolette</a></cite>
</p></blockquote>
<p>Same thing here.  I was talking with a potential customer the other day and he said &#8220;for most projects here we don&#8217;t have time to write tests, we just code like hell to get them finished as soon as we can&#8221;.  Well, but writing tests, for me, *is* the way to get it finished as soon as I can.  The moment when we&#8217;re under pressure is the moment we should stick to good technique the most.</p>
<p>One example of this is a <a href="http://www.xpday.net/Xpday2006/CodingTournament.html" title="XP Days Benelux 2006-Coding Tournament">nice coding competition</a> by Lasse Koskela and Markus Hjort at XP Days Benelux 2006.  The objective of the game was to write a program to play Indian Poker (a silly, fun version of Poker) and win against other programs.  The whole competition lasted less than three hours.  As you can imagine there was not much time to waste :-)  So what did we do?  (I was pairing with a young chap from Philips who didn&#8217;t know much Java, so I, well, kept the keyboard all the time.)  As I mentioned in my <a href="../archives/59.html" title="Extreme Enthusiasm  &raquo; Blog Archive   &raquo; XP Day Benelux: the report">earlier report on the event</a>, We wrote an acceptance test and then we used TDD.  We did drive *all* code with tests.  And we won :-)</p>
<p>How did we win?  Well, for one thing, half the other programs crashed.  Ours didn&#8217;t.  We decided on a simple strategy to decide when to &#8220;stay&#8221; and when to &#8220;fold&#8221;.  Since we finished early and we still had something like 10 minutes, we decided to add an option of raising if the cards looked very good for us.  Still driving code with tests.  And you know what?  At the last round only two or three programs remained.  Our bot won by raising!  </p>
<p>Three hours, a new API, a new problem.  I did what it takes: to use the best programming technique I know.  I don&#8217;t have time for working in a sloppy way.</p>
  				</div>

  				<p class="postmetadata">Posted in <a href="../archives/category/agile.html" rel="category tag">Agile</a> |   <a href="../archives/546.html#comments">3 Comments &#187;</a></p>
  			</div>

  		
  			<div class="post" id="post-543">
  				<h2><a href="../archives/543.html" rel="bookmark" title="Permanent Link to David Tchepak on TDD">David Tchepak on TDD</a></h2>
  				<small>March 25th, 2011 <!-- by matteo --></small>

  				<div class="entry">
  					<p>David Tchepak wrote a <a href="http://www.davesquared.net/2011/03/why-learning-tdd-is-hard-and-what-to-do.html">thoughtful post on TDD</a>.  I share what he says.  I find useful this little summary:</p>
<blockquote><p>The process of writing the test gives us all sorts of feedback. </p>
<ul>
<li>The setup is too long or complicated? We&#8217;ve probably got too many collaborators (or are violating the Law of Demeter for them) and can try encapsulating them behind a new abstraction.
</li>
<li>Too many scenarios or test fixtures on the same SUT? Our SUT probably has too many responsibilities. </li>
<li>Too hard to isolate the behaviour we&#8217;re trying to test, or can&#8217;t find how to write an assert for the behaviour? Maybe the current API or abstraction is wrong, and needs to be broken down differently?</li>
</ul>
<p>[&#8230;] Writing the test first gives us ample opportunity to respond to this feedback, to sketch out our design, before committing to it. There is no cheaper time to change your code than before it is written.
</p></blockquote>
<p>The article is full of little gems like this note:</p>
<blockquote><p>If you can&#8217;t get TDD to help you with a problem, make a note of it before trying something else, and come back to it later. It is important to see if it was just a problem TDD was ill-suited for, or whether a gap in your knowledge has been exposed. You&#8217;ll never know the difference if you give up too easily on TDD. Pursuing these leads is what led me to discover mocking, IoC containers, conventions, BDD etc. And I&#8217;m far from finished finding gaps in my knowledge. ;)
</p></blockquote>
<p>I like this tone.  He does admit that TDD will not always for us, yet he advises not to accept that as a fact.  Every obstacle in our work should be a reason to sit down and think what we could have done differently.  Just as a team should not accept bugs as an inevitable fact of life, but should treat each one as an indication that they must do something to improve their process,  the same should apply to when we are &#8220;stuck&#8221; not knowing how to proceed, or when we don&#8217;t like how our code turned out to be.  Think about it; what part in our process could have been improved so that this does not happen again?  (And if this leads me to think &#8220;my process? what process??&#8221;, great! I&#8217;m on the right path to improve :-)</p>
  				</div>

  				<p class="postmetadata">Posted in <a href="../archives/category/agile.html" rel="category tag">Agile</a> |   <a href="../archives/543.html#respond">No Comments &#187;</a></p>
  			</div>

  		
  			<div class="post" id="post-529">
  				<h2><a href="../archives/529.html" rel="bookmark" title="Permanent Link to Algebraic datatypes in Java">Algebraic datatypes in Java</a></h2>
  				<small>March 10th, 2011 <!-- by matteo --></small>

  				<div class="entry">
  					<p>Being in bed with a little fever, I thought it might be a good time for a little easy work on functional programming in Java.</p>
<h3>Haskell envy</h3>
<p>One of the things functional programmers often use is <em>algebraic datatypes</em>.  For instance, in Haskell you would define a binary tree as such:</p>
<p><code></p>
<pre>
type tree = Empty
          | Leaf of int
          | Node of tree * tree
  </pre>
<p></code></p>
<p>This says that a tree is either the Empty tree, or a Leaf that carries an integer value, or a Node that carries two subtrees.  </p>
<p>The next thing is to define functions, such as tree height; the nice thing is that the functions are then defined by cases.  It&#8217;s kind of fun: </p>
<p><code></p>
<pre>
height :: Tree -> Int
height Empty = 0
height (Leaf n) = 1
height (Node l r) = 1 + max (height l) (height r)    
  </pre>
<p></code></p>
<p>This says that an Empty tree has height 0, a Leaf has height 1, and a Node has height that is the maximum height of its subtrees, plus 1.  Now we could have fun defining all sorts of other functions, like the contour (the list of the integers of all leafs), search for a particular value, addition of elements, and so on.</p>
<p>Additionally, when working in languages like Haskell, the compiler makes sure that when we define a function by cases, the program will not compile unless we remembered to define all cases.  </p>
<p>This sort of data structures have all sort of applications; an obvious one is representing syntax trees, that is the output of a parser.  Another one is representing the syntax rules themselves.</p>
<h3>We can do it!</h3>
<p>What&#8217;s to do if you have to work in a simpler language like Java?  Do we have to give up the fun of algebraic data types?  Of course not!  It&#8217;s possible to define such structures in Java, even though it will take one or two orders of magnitude more lines of code.</p>
<h3>Step zero: define the structure</h3>
<p><code></p>
<pre>
public abstract class Tree {}

public class EmptyTree extends Tree {}

public class Leaf extends Tree {
    public Leaf(int value) {
    }
}

public class Node extends Tree {
    public Node(Tree left, Tree right) {
    }
}    
</pre>
<p></code></p>
<p>Now we can create our trees with the following deliciously clumsy syntax:</p>
<p><code></p>
<pre>
Tree tree = new Node(
    new Node(new Leaf(0), new EmptyTree()), 
    new EmptyTree());    
</pre>
<p></code></p>
<p>We could make it slightly less verbose with static functions.</p>
<h3>Step one: define height</h3>
<p>The easy way to add a function is to define it abstractly in Tree.  The compiler then forces us to define it in all Tree subclasses (in all cases).  First a test:</p>
<p><code></p>
<pre>
@Test
public void heightOfSimpleTree() throws Exception {     
    Tree tree = new Node(
        new Node(new Leaf(0), new EmptyTree()),
        new EmptyTree());
    assertEquals(3, tree.height());
}
</pre>
<p></code></p>
<p>Then the implementation:</p>
<p><code></p>
<pre>
public abstract class Tree {
    public abstract int height();
}


public class EmptyTree extends Tree {
    public int height() {
        return 0;
    }
}    


public class Leaf extends Tree {
    public Leaf(int value) {
    }

    public int height() {
        return 1;
    }
}


public class Node extends Tree {
    private final Tree left;
    private final Tree right;

    public Node(Tree left, Tree right) {
        this.left = left;
        this.right = right;
    }

    public int height() {
        return 1+ Math.max(left.height(), right.height());
    }
}
</pre>
<p></code></p>
<p>(I told you this was going to be verbose.  You were warned :-)  </p>
<h3>Step two: respect the OCP, son!</h3>
<p>Now we could go on defining all kinds of functions on trees this way; but this would mean that for every new function, we need to change all of our classes.  That won&#8217;t do; we don&#8217;t want to keep changing and adding to the same old files.  We want to <em>close</em> the Tree classes for modification, but keep them <em>open</em> for extension; this is the <a href="../archives/293.html" title="The OCP kata">open/closed principle</a>.   What can we do?</p>
<p>A pattern to the rescue.  Have you ever wondered where it&#8217;s reasonable to use <em>Visitor</em>?  Well, this is it.  As usual, we start with a test:</p>
<p><code></p>
<pre>
@Test
public void heightWithVisitor() throws Exception {
    Tree tree = new Node(
        new Node(new Leaf(0), new EmptyTree()),
        new EmptyTree());
    Visitor height = new Height();
    assertEquals(3, tree.accept(height));
}
</pre>
<p></code></p>
<p>The implementation of visitor can be:</p>
<p><code></p>
<pre>
public abstract class Tree {
    public abstract int accept(Visitor visitor);
}

public class EmptyTree extends Tree {
    public int accept(Visitor visitor) {
        return visitor.visitEmptyTree();
    }
}

public class Leaf extends Tree {
    private final int value;

    public Leaf(int value) {
        this.value = value;
    }

    public int accept(Visitor visitor) {
        return visitor.visitLeaf(value);
    }
}

public class Node extends Tree {
    private final Tree left;
    private final Tree right;

    public Node(Tree left, Tree right) {
        this.left = left;
        this.right = right;
    }

    public int accept(Visitor visitor) {
        return visitor.visitNode(left, right);
    }
}
</pre>
<p></code></p>
<p>Note that each tree subcase provides the visitor with all the information they contain.  This way we avoid getters, which is nice.  The definition of Height is very similar to the Haskell example:<br />
<code></p>
<pre>
public class Height implements Visitor {    
    public int visitEmptyTree() {
        return 0;
    }

    public int visitLeaf(int value) {
        return 1;
    }

    public int visitNode(Tree left, Tree right) {
        return 1 + Math.max(left.accept(this), right.accept(this));
    }
}
</pre>
<p></code></p>
<p>The nice thing is that now the Height function lives in its own little object.  We were able to decouple it from the Tree classes.</p>
<p>We still can&#8217;t forget to define a case, as the compiler will force us to implement all three methods of Visitor.</p>
<h3>Step three: generics</h3>
<p>Of course, the big problem with this Visitor implementation is that it only works for functions that return integers.  We can solve this with Java generics:</p>
<p><code></p>
<pre>
public interface Visitor&lt;T&gt; {
    T visitEmptyTree();
    T visitLeaf(int value);
    T visitNode(Tree left, Tree right);
}

public abstract class Tree {
    public abstract &lt;T&gt; T accept(Visitor&lt;T&gt; visitor);
}

public class EmptyTree extends Tree {
    public &lt;T&gt; T accept(Visitor&lt;T&gt; visitor) {
        return visitor.visitEmptyTree();
    }
}
// etc.
</pre>
<p></code></p>
<p>The other way to solve the genericity problem would be to define the Height visitor as a stateful object, that has a <code>int result()</code> method that is not part of the Visitor interface.  But we&#8217;ll leave that to some other time.</p>
<p>A delightful little book on this very subject is <a href="http://www.ccs.neu.edu/home/matthias/BALJ/">A Little Java, A Few Patterns</a> by Matthias Felleisen and Daniel P. Friedman.  In fact I think I learned the meaning of Visitor by reading this book! The authors wrote a number of books on Lisp and Scheme in a similar vein; the first one was <em>The Little Lisper</em> and it takes a very unusual approach to teaching.</p>
<p>Hope it comes in handy!</p>
  				</div>

  				<p class="postmetadata">Posted in <a href="../archives/category/agile.html" rel="category tag">Agile</a> |   <a href="../archives/529.html#comments">12 Comments &#187;</a></p>
  			</div>

  		
  			<div class="post" id="post-521">
  				<h2><a href="../archives/521.html" rel="bookmark" title="Permanent Link to Last presentation: TDD from end to end">Last presentation: TDD from end to end</a></h2>
  				<small>March 6th, 2011 <!-- by matteo --></small>

  				<div class="entry">
  					<p>Yesterday I presented &#8220;TDD from end to end&#8221; at <a href="http://www.codemotion.it/">Codemotion</a> in Rome.  My talk was about how to use TDD to drive the development of the whole system, from the GUI to the database.  The slides contain a small solved exercise, which could be a good kata for Java servlet and JDBC skills.  The techniques I showed are not my own! I&#8217;m showing things I learned from <a href="http://twitter.com/cirillof">Francesco Cirillo</a> and <a href="http://minnenratta.wordpress.com/">Carlo Bottiglieri</a>.</p>
<p>The slides are in Italian, but they mostly contain Java code with English identifiers: <a href='../wp-content/uploads/2011/03/20110305-tdd-codemotion.pdf'>20110305-tdd-codemotion.pdf</a>.  Enjoy!</p>
<p><strong>Update:</strong> here is <a href="http://blip.tv/codemotion-2011-channel/n14-09-15-20-vaccari-tools-5393840">the video</a>.</p>
  				</div>

  				<p class="postmetadata">Posted in <a href="../archives/category/agile.html" rel="category tag">Agile</a> |   <a href="../archives/521.html#comments">3 Comments &#187;</a></p>
  			</div>

  		
  		<div class="navigation">
  			<div class="alignleft"><a href="7.html" >&laquo; Previous Entries</a></div>
  			<div class="alignright"><a href="5.html" >Next Entries &raquo;</a></div>
  		</div>

  	  </div>

  <div id='right-col'>
    <p class='mobile-quicklink'><a href="#main-col">Top</a></p>
      <div id="sidebar">
    <ul>

      <li>
        <form method="get" id="searchform" action="http://matteo.vaccari.name/blog/">
  <div>
    <input tabindex="1" type="text" value="" name="s" id="s" />
    <input type="submit" id="searchsubmit" value="Search" />
  </div>
</form>
      </li>

      <li>

        <h2>About</h2>

	I am a software developer working with <a href="http://thoughtworks.com/">Thoughtworks Italia</a>.
        I'm a fan of <a
        href="http://extremeprogramming.org/">Extreme Programming</a>.
        I&nbsp;helped organize the <a
        href="http://essap.dicom.uninsubria.it/">European Summer School on
        Agile Programming</a>

      </li>

      <li>
            </li>

      <li class="pagenav"><h2>Pages</h2><ul><li class="page_item page-item-851"><a href="../selected-tdd-resources-to-start.html">Selected TDD Resources To Start</a></li>
<li class="page_item page-item-583"><a href="../tdd-resources.html">TDD Resources</a></li>
<li class="page_item page-item-247"><a href="../the-hexagonal-architecture.html">The Hexagonal Architecture</a></li>
</ul></li>

      
      <li><h2>Archives</h2>
        <ul>
        	<li><a href='../archives/date/2018/10.html'>October 2018</a></li>
	<li><a href='../archives/date/2017/09.html'>September 2017</a></li>
	<li><a href='../archives/date/2016/08.html'>August 2016</a></li>
	<li><a href='../archives/date/2016/03.html'>March 2016</a></li>
	<li><a href='../archives/date/2016/01.html'>January 2016</a></li>
	<li><a href='../archives/date/2014/12.html'>December 2014</a></li>
	<li><a href='../archives/date/2014/10.html'>October 2014</a></li>
	<li><a href='../archives/date/2014/06.html'>June 2014</a></li>
	<li><a href='../archives/date/2014/02.html'>February 2014</a></li>
	<li><a href='../archives/date/2013/12.html'>December 2013</a></li>
	<li><a href='../archives/date/2013/11.html'>November 2013</a></li>
	<li><a href='../archives/date/2013/06.html'>June 2013</a></li>
	<li><a href='../archives/date/2013/05.html'>May 2013</a></li>
	<li><a href='../archives/date/2013/03.html'>March 2013</a></li>
	<li><a href='../archives/date/2013/02.html'>February 2013</a></li>
	<li><a href='../archives/date/2012/10.html'>October 2012</a></li>
	<li><a href='../archives/date/2012/08.html'>August 2012</a></li>
	<li><a href='../archives/date/2012/07.html'>July 2012</a></li>
	<li><a href='../archives/date/2012/06.html'>June 2012</a></li>
	<li><a href='../archives/date/2012/05.html'>May 2012</a></li>
	<li><a href='../archives/date/2012/04.html'>April 2012</a></li>
	<li><a href='../archives/date/2012/01.html'>January 2012</a></li>
	<li><a href='../archives/date/2011/12.html'>December 2011</a></li>
	<li><a href='../archives/date/2011/11.html'>November 2011</a></li>
	<li><a href='../archives/date/2011/10.html'>October 2011</a></li>
	<li><a href='../archives/date/2011/07.html'>July 2011</a></li>
	<li><a href='../archives/date/2011/06.html'>June 2011</a></li>
	<li><a href='../archives/date/2011/05.html'>May 2011</a></li>
	<li><a href='../archives/date/2011/04.html'>April 2011</a></li>
	<li><a href='../archives/date/2011/03.html'>March 2011</a></li>
	<li><a href='../archives/date/2011/02.html'>February 2011</a></li>
	<li><a href='../archives/date/2010/11.html'>November 2010</a></li>
	<li><a href='../archives/date/2010/10.html'>October 2010</a></li>
	<li><a href='../archives/date/2010/09.html'>September 2010</a></li>
	<li><a href='../archives/date/2010/08.html'>August 2010</a></li>
	<li><a href='../archives/date/2010/07.html'>July 2010</a></li>
	<li><a href='../archives/date/2010/06.html'>June 2010</a></li>
	<li><a href='../archives/date/2010/05.html'>May 2010</a></li>
	<li><a href='../archives/date/2010/04.html'>April 2010</a></li>
	<li><a href='../archives/date/2010/03.html'>March 2010</a></li>
	<li><a href='../archives/date/2010/02.html'>February 2010</a></li>
	<li><a href='../archives/date/2010/01.html'>January 2010</a></li>
	<li><a href='../archives/date/2009/12.html'>December 2009</a></li>
	<li><a href='../archives/date/2009/11.html'>November 2009</a></li>
	<li><a href='../archives/date/2009/10.html'>October 2009</a></li>
	<li><a href='../archives/date/2009/09.html'>September 2009</a></li>
	<li><a href='../archives/date/2009/07.html'>July 2009</a></li>
	<li><a href='../archives/date/2009/05.html'>May 2009</a></li>
	<li><a href='../archives/date/2009/04.html'>April 2009</a></li>
	<li><a href='../archives/date/2009/03.html'>March 2009</a></li>
	<li><a href='../archives/date/2009/02.html'>February 2009</a></li>
	<li><a href='../archives/date/2009/01.html'>January 2009</a></li>
	<li><a href='../archives/date/2008/12.html'>December 2008</a></li>
	<li><a href='../archives/date/2008/11.html'>November 2008</a></li>
	<li><a href='../archives/date/2008/10.html'>October 2008</a></li>
	<li><a href='../archives/date/2008/09.html'>September 2008</a></li>
	<li><a href='../archives/date/2008/07.html'>July 2008</a></li>
	<li><a href='../archives/date/2008/06.html'>June 2008</a></li>
	<li><a href='../archives/date/2008/05.html'>May 2008</a></li>
	<li><a href='../archives/date/2008/04.html'>April 2008</a></li>
	<li><a href='../archives/date/2008/01.html'>January 2008</a></li>
	<li><a href='../archives/date/2007/11.html'>November 2007</a></li>
	<li><a href='../archives/date/2007/10.html'>October 2007</a></li>
	<li><a href='../archives/date/2007/09.html'>September 2007</a></li>
	<li><a href='../archives/date/2007/06.html'>June 2007</a></li>
	<li><a href='../archives/date/2007/05.html'>May 2007</a></li>
	<li><a href='../archives/date/2007/04.html'>April 2007</a></li>
	<li><a href='../archives/date/2007/03.html'>March 2007</a></li>
	<li><a href='../archives/date/2007/02.html'>February 2007</a></li>
	<li><a href='../archives/date/2007/01.html'>January 2007</a></li>
	<li><a href='../archives/date/2006/12.html'>December 2006</a></li>
	<li><a href='../archives/date/2006/11.html'>November 2006</a></li>
	<li><a href='../archives/date/2006/10.html'>October 2006</a></li>
	<li><a href='../archives/date/2006/09.html'>September 2006</a></li>
	<li><a href='../archives/date/2006/08.html'>August 2006</a></li>
	<li><a href='../archives/date/2006/07.html'>July 2006</a></li>
	<li><a href='../archives/date/2006/06.html'>June 2006</a></li>
	<li><a href='../archives/date/2006/05.html'>May 2006</a></li>
	<li><a href='../archives/date/2006/04.html'>April 2006</a></li>
	<li><a href='../archives/date/2006/03.html'>March 2006</a></li>
	<li><a href='../archives/date/2006/02.html'>February 2006</a></li>
	<li><a href='../archives/date/2006/01.html'>January 2006</a></li>
        </ul>
      </li>

      <li><h2>Categories</h2>
        <ul>
        	<li class="cat-item cat-item-1"><a href="../archives/category/agile.html" >Agile</a> (229)
</li>
	<li class="cat-item cat-item-3"><a href="../archives/category/books.html" >Books</a> (2)
</li>
	<li class="cat-item cat-item-11"><a href="../archives/category/design-exercise.html" >Design Exercise</a> (5)
</li>
	<li class="cat-item cat-item-6"><a href="../archives/category/essay.html" >Essay</a> (13)
</li>
	<li class="cat-item cat-item-8"><a href="../archives/category/expressive-code.html" >Expressive Code</a> (11)
</li>
	<li class="cat-item cat-item-10"><a href="../archives/category/fundamentals.html" >Fundamentals</a> (6)
</li>
	<li class="cat-item cat-item-9"><a href="../archives/category/other.html" >other</a> (1)
</li>
        </ul>
      </li>

              <!-- ?php get_links_list(); ? -->

        <li><h2>Misc</h2>
        <ul>
          <li><a href="feed:http://matteo.vaccari.name/blog/feed">Entries (RSS)</a> and <a href="feed:http://matteo.vaccari.name/blog/comments/feed">Comments (RSS)</a></li>
                  </ul>
        </li>
      
    </ul>
  </div>

    <p class='mobile-quicklink'><a href="#main-col">Top</a></p>
  </div>
</div>


<hr />
<div id="footer">
<address>
  <script type="text/javascript">eval(unescape('%64%6f%63%75%6d%65%6e%74%2e%77%72%69%74%65%28%27%3c%61%20%68%72%65%66%3d%22%6d%61%69%6c%74%6f%3a%76%61%63%63%61%72%69%40%70%6f%62%6f%78%2e%63%6f%6d%22%3e%76%61%63%63%61%72%69%40%70%6f%62%6f%78%2e%63%6f%6d%3c%2f%61%3e%27%29%3b'))</script>
</address>
</div>
</div>
  <script type='text/javascript' src='../wp-includes/js/wp-embed.min3c21.js?ver=5.1.1'></script>
</body>

<!-- Mirrored from matteo.vaccari.name/blog/page/6 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 24 Sep 2021 10:31:39 GMT -->
</html>
