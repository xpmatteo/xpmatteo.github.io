<!doctype html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="shortcut icon" href="http://localhost:1313/favicon.ico" />

<title>Avoid Primitive Obsession in Go |Matteo Vaccari&#39;s Home</title>
<meta
  name="title"
  content="Avoid Primitive Obsession in Go"
/>
<meta
  name="description"
  content="Primitive Obsession is a code smell. Consider this code:
type User struct { FirstName string LastName string Email string } We&rsquo;re using the type string everywhere. If we wanted a function to create a new user, its signature would be obtuse:
func NewUser(first, last, email string) User { ... } It&rsquo;s easy to get confused and swap first and last name, or worse. The smell is called &ldquo;primitive obsession&rdquo; because we tend to use primitive types such as strings or integers for everything."
/>
<meta
  name="keywords"
  content=""
/>


<meta property="og:title" content="Avoid Primitive Obsession in Go" />
<meta property="og:description" content="Primitive Obsession is a code smell. Consider this code:
type User struct { FirstName string LastName string Email string } We&rsquo;re using the type string everywhere. If we wanted a function to create a new user, its signature would be obtuse:
func NewUser(first, last, email string) User { ... } It&rsquo;s easy to get confused and swap first and last name, or worse. The smell is called &ldquo;primitive obsession&rdquo; because we tend to use primitive types such as strings or integers for everything." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/avoid-primitive-obsession-in-go/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-24T16:52:19+01:00" />
<meta property="article:modified_time" content="2024-02-24T16:52:19+01:00" />





<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Avoid Primitive Obsession in Go"/>
<meta name="twitter:description" content="Primitive Obsession is a code smell. Consider this code:
type User struct { FirstName string LastName string Email string } We&rsquo;re using the type string everywhere. If we wanted a function to create a new user, its signature would be obtuse:
func NewUser(first, last, email string) User { ... } It&rsquo;s easy to get confused and swap first and last name, or worse. The smell is called &ldquo;primitive obsession&rdquo; because we tend to use primitive types such as strings or integers for everything."/>




<meta itemprop="name" content="Avoid Primitive Obsession in Go">
<meta itemprop="description" content="Primitive Obsession is a code smell. Consider this code:
type User struct { FirstName string LastName string Email string } We&rsquo;re using the type string everywhere. If we wanted a function to create a new user, its signature would be obtuse:
func NewUser(first, last, email string) User { ... } It&rsquo;s easy to get confused and swap first and last name, or worse. The smell is called &ldquo;primitive obsession&rdquo; because we tend to use primitive types such as strings or integers for everything."><meta itemprop="datePublished" content="2024-02-24T16:52:19+01:00" />
<meta itemprop="dateModified" content="2024-02-24T16:52:19+01:00" />
<meta itemprop="wordCount" content="182">
<meta itemprop="keywords" content="" />
<meta name="referrer" content="no-referrer-when-downgrade" />

    
    <link href="/simple.min.css" rel="stylesheet" />

    
    <link href="/style.min.css" rel="stylesheet" />

    

    <link href="/css/syntax.css" rel="stylesheet">
</head>

  <body>
    <header>
      <nav>
  <a
    href="/"
    
    >Home</a
  >

  <a
    href="/posts/"
    
    >Posts</a
  >

<a href="http://localhost:1313/index.xml">
  <svg xmlns="http://www.w3.org/2000/svg" class="icon" viewBox="0 0 448 512">
    
    <path
      d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"
    />
  </svg>
  RSS
</a>
</nav>

<h1>Avoid Primitive Obsession in Go</h1>


    </header>
    <main>
      
  
  
  <content>
    <p><em>Primitive Obsession</em> is a code smell.  Consider this code:</p>






<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">FirstName</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">  <span class="nx">LastName</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Email</span>     <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
<p>We&rsquo;re using the type <code>string</code> everywhere.  If we wanted a function to create a new user, its signature
would be obtuse:</p>






<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">NewUser</span><span class="p">(</span><span class="nx">first</span><span class="p">,</span> <span class="nx">last</span><span class="p">,</span> <span class="nx">email</span> <span class="kt">string</span><span class="p">)</span> <span class="nx">User</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span></span></span></code></pre></div>
<p>It&rsquo;s easy to get confused and swap first and last name, or worse. The smell is called &ldquo;primitive obsession&rdquo; because we tend
to use primitive types such as strings or integers for everything.</p>
<p>Luckily, in Go it&rsquo;s easy to define custom types that behave like a primitive, but are considered distinct by the compiler:</p>






<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">FirstName</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">LastName</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">EmailAddress</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">First</span> <span class="nx">FirstName</span> 
</span></span><span class="line"><span class="cl">  <span class="nx">Last</span>  <span class="nx">LastName</span>  
</span></span><span class="line"><span class="cl">  <span class="nx">Email</span> <span class="nx">EmailAddress</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">NewUser</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="nx">first</span> <span class="nx">FirstName</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">last</span> <span class="nx">LastName</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="nx">email</span> <span class="nx">EmailAddress</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="nx">User</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></div>
<p>Now it&rsquo;s much more difficult to swap first and last name, or pass a name in place of an email address.  This code does not compile:</p>






<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">first</span> <span class="o">:=</span> <span class="nf">FirstName</span><span class="p">(</span><span class="s">&#34;Jane&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">last</span> <span class="o">:=</span> <span class="nf">LastName</span><span class="p">(</span><span class="s">&#34;Doe&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">email</span> <span class="o">:=</span> <span class="nf">EmailAddress</span><span class="p">(</span><span class="s">&#34;jane@example.com&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nf">NewUser</span><span class="p">(</span><span class="nx">last</span><span class="p">,</span> <span class="nx">first</span><span class="p">,</span> <span class="nx">email</span><span class="p">)</span> <span class="c1">// type error!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span></span></span></code></pre></div>

  </content>
  <p>
    
  </p>

    </main>
    <footer>
      

    </footer>

    
</body>
</html>
