<!DOCTYPE html>
<html>


<!-- Mirrored from matteo.vaccari.name/blog/archives/category/agile/page/13 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 24 Sep 2021 10:31:55 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="initial-scale=1">

<title>Extreme Enthusiasm   &raquo; Agile</title>

<meta name="generator" content="WordPress 5.1.1" /> <!-- leave this for stats -->

<link rel="stylesheet" href="../../../../wp-content/themes/mv2/style.css" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="Extreme Enthusiasm RSS Feed" href="../../../../feed" />
<link rel="pingback" href="../../../../xmlrpc.php" />

<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="Extreme Enthusiasm &raquo; Agile Category Feed" href="../feed" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11.2.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11.2.0\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/matteo.vaccari.name\/blog\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.1.1"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='wp-block-library-css'  href='../../../../wp-includes/css/dist/block-library/style.min3c21.css?ver=5.1.1' type='text/css' media='all' />
<link rel='https://api.w.org/' href='../../../../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.1.1" />
</head>
<body>
<div id="page">

<div id="header">
	<h1><a href="../../../../../blog">Extreme Enthusiasm</a></h1>
</div>

<div id='maincontent'>
  <div id='main-col'>

		
				<h2 class="pagetitle">Archive for the 'Agile' Category</h2>

 	  
		<div class="navigation">
			<div class="alignleft"><a href="14.html" >&laquo; Previous Entries</a></div>
			<div class="alignright"><a href="12.html" >Next Entries &raquo;</a></div>
		</div>

				<div class="post">
				<h3 id="post-154"><a href="../../../154.html" rel="bookmark" title="Permanent Link to The birthday greetings kata">The birthday greetings kata</a></h3>
				<small>Tuesday, January 13th, 2009</small>

				<div class="entry">
					<h3>Purpose</h3>
<p>To learn about the hexagonal architecture, which is a good way to structure an application, and how to shield your domain model from external apis and systems.</p>
<h4>Prerequisites</h4>
<p>This is not a basic exercise.  I suppose you are already familiar with <span class="caps">TDD</span> and refactoring.  You will need a computer with Java ≥ 1.5 and a Java <span class="caps">IDE</span> (I assume you will use Eclipse).</p>
<h4>Ingredients</h4>
<p>This kata can be done in two ways; if you want to try the refactoring way, then <a href="http://github.com/xpmatteo/birthday-greetings-kata" title="xpmatteo's birthday-greetings-kata">import the code</a> in your IDE.  If you want to try the <span class="caps">TDD</span> way, start with a blank Java project.</p>
<h3>Problem: write a program that</h3>
<ol>
<li>Loads a set of employee records from a flat file</li>
<li>Sends a greetings email to all employees whose birthday is today</li>
</ol>
<p>The flat file is a sequence of records, separated by newlines; this are the first few lines:</p>
<pre>last_name, first_name, date_of_birth, email
Doe, John, 1982/10/08, john.doe@foobar.com
Ann, Mary, 1975/09/11, mary.ann@foobar.com
</pre>
<p>The greetings email contains the following text:</p>
<pre>Subject: Happy birthday!

Happy birthday, dear John!
</pre>
<p>with the first name of the employee substituted for “John”</p>
<p>The program should be invoked by a main program like this one:</p>
<pre>public static void main(String[] args) {
    ...
    BirthdayService birthdayService = new BirthdayService(
        employeeRepository, emailService);
    birthdayService.sendGreetings(today());
}
</pre>
<p>Note that the <em>collaborators</em> of the birthdayService objects are <em>injected</em> in it. Ideally domain code should <em>never</em> use the <code>new</code> operator. The <code>new</code> operator is called from outside the domain code, to set up an aggregate of objects that collaborate together.</p>
<h3>Goals</h3>
<p>The goal of this exercise is to come up with a solution that is</p>
<ul>
<li>Testable; we should be able to test the internal application logic with no need to ever send a real email.</li>
<li>Flexible: we anticipate that the data source in the future could change from a flat file to a relational database, or perhaps a web service. We also anticipate that the email service could soon be replaced with a service that sends greetings through Facebook or some other social network.</li>
<li>Well-designed: separate clearly the business logic from the infrastructure.</li>
</ul>
<h3>An optional complication</h3>
<p>If you want to develop further the domain logic, you can take into account the special rule for people born on a 29th of February: they should be sent greetings on the 28th of February, except in leap years, when they will get their greetings on the 29th.</p>
<h3>Testability</h3>
<p>A test is <em>not a unit</em> test if:</p>
<ul>
<li>It talks to a database</li>
<li>It communicates across the network</li>
<li>It touches the file system</li>
<li>You have to do things to your environment to run it (eg, change config files, comment line)<br />
Tests that do this are <em>integration tests</em>.</li>
</ul>
<p>Integration tests have their place; but they should be clearly marked as such, so that we can execute them separately. The reason we draw this sharp distinction is that unit tests should be</p>
<ol>
<li>Very fast; we expect to run thousands of tests per second.</li>
<li>Reliable; we don’t want to see tests failing because of random technical problems in external systems.</li>
</ol>
<p>One way to make code more testable is to use Dependency Injection. This means that an object should <strong>never</strong> instantiate its collaborator by calling the <code>new</code> operator. It should be passed its collaborators instead. When we work this way we separate classes in two kinds.</p>
<ol>
<li><em>Application logic</em> classes have their collaborators passed into them in the constructor.</li>
<li><em>Configuration</em> classes build a network of objects, setting up their collaborators.<br />
Application logic classes contain a bunch of logic, but no calls to the <code>new</code> operator. Configuration classes contain a bunch of calls to the <code>new</code> operator, but no application logic.</li>
</ol>
<h3>The <em>hexagonal architecture</em></h3>
<p>The traditional way to structure an application in <em>layers</em> is</p>
<pre>+--------------+
| presentation |
|--------------|
|    domain    |
|--------------|
| persistence  |
+--------------+
</pre>
<p>The meaning of a layer diagram is that</p>
<ol>
<li>a <em>layer</em> is a set of classes;</li>
<li>a class cannot reference classes in layers <em>above</em>; a class can only reference other classes in the same layer, or in the lower layers.</li>
</ol>
<p>In other words, it should be possible to compile a layer without access to the source code of the layers above it, as long as we have the source code of the layers below.</p>
<p>The traditional three-layers architecture has many drawbacks.</p>
<ol>
<li>It assumes that an application communicates with only two external systems, the user (through the user interface), and the database. Real applications often have more external systems to deal with than that; for instance, input could come from a messaging queue; data could come from more than one database and the file system. Other systems could be involved, such as a credit card payment service.</li>
<li>It links domain code to the persistence layer in a way that makes external APIs pollute domain logic. References to <span class="caps">JDBC</span>, SQL or object-relational mapping frameworks APIs creep into the domain logic.</li>
<li>It makes it difficult to test domaain logic without invoving the database; that is, it makes it difficult to write <em>unit tests</em> for the domain logic, which is where unit tests should be more useful.</li>
</ol>
<p>The hexagonal architecture avoids these problems by treating all external systems as equally external. The system is not seen as a pipe with user interface as one end, and the database at the other. We model the system as a kernel of application code, surrounded by ports and adapters to the external systems.</p>
<p><img src="../../../../wp-content/uploads/2009/01/hexagonal-architecture.png" alt="" title="hexagonal-architecture" width="426" height="227" class="alignnone size-full wp-image-163" srcset="http://matteo.vaccari.name/blog/wp-content/uploads/2009/01/hexagonal-architecture.png 426w, http://matteo.vaccari.name/blog/wp-content/uploads/2009/01/hexagonal-architecture-300x159.png 300w" sizes="(max-width: 426px) 100vw, 426px" /></p>
<p>Every external systems is hidden behind a facade that:</p>
<ol>
<li>Provides a simplified view of the external system, with only the operations that we need to do with it.</li>
<li>Is expressed in terms of the domain model.</li>
</ol>
<p>The domain model does not depend on any other layer; all other layers depend on the domain model.</p>
<pre>+-----+-------------+----------+
| gui | file system | database |
|-----+-------------+----------+
|          domain              |
|------------------------------+
</pre>
<p>How can we make the domain independent, for instance, of the database? We should define a <em>repository</em> interface that returns domain objects. The interface is defined in the domain layer, and is implemented in the database layer.</p>
<h3>The Facade-Adapter combo</h3>
<p>The way to implement the hexagonal architecture is to abstract external systems and APIs with a <em>Facade</em>. A facade is a simplified view of the external system. For instance, there are a million of things that I could do with <span class="caps">SQL</span> and <span class="caps">JDBC</span> and my relational database. But my application only needs to do a few, specific things with the DB; for instance, retrieve all the employees that match some criterion. In that case, I can write a simple interface that exposes just that operation:</p>
<pre>interface EmployeeRepository {
  List&lt;Employee&gt; findEmployeesBornOn(int month, int day);
}
</pre>
<p>Note that the interface is written in terms of <em>domain</em> objects: the Employee object belongs to the domain. A case could be made that the specification for the date (month, day) should also be a domain object; I leave that to you, the reader.</p>
<p>So that was the <em>facade</em> part. The domain logic will only deal with the facade, and can be tested thoroughly using stubbed and mocked versions of that interface. But what about the real implementation?</p>
<p><img src="../../../../wp-content/uploads/2009/01/facade-adapter-combo.png" alt="" title="facade-adapter-combo" width="500" height="200" class="alignnone size-full wp-image-162" srcset="http://matteo.vaccari.name/blog/wp-content/uploads/2009/01/facade-adapter-combo.png 779w, http://matteo.vaccari.name/blog/wp-content/uploads/2009/01/facade-adapter-combo-300x120.png 300w" sizes="(max-width: 500px) 100vw, 500px" /></p>
<p>The code that talks with the real database (or flat file, in our case) implements the facade and correspond to the <em>adapter</em> pattern. The adapter can be unit tested as well, by mocking the external APIs, but this is <strong>usually not worth the effort</strong>. Mocking the <span class="caps">JDBC</span> APIs is in most cases very complicated. It’s perhaps more effective to just test it on a copy of the real database, or maybe with an in-memory version of the real database. There are no hard-and-fast rules here; there is a <a href="http://www.manning.com/koskela/">mixed bag of tricks</a>. One thing most proponents of mock objects agree on is that you <em>should only mock your own interfaces</em> (see section 4.1 of <a href="http://www.jmock.org/oopsla2004.pdf">Mock Roles, Not Objects</a>).</p>
<h3>Acknowledgment</h3>
<p>The idea for the exercise of sending email I got from someone I overheard at an XP Day; I think it was Willem van den Ende but I’m not sure.</p>
<p>Thanks to the Orione team for beta-testing and commenting on this kata, in particular Marco Gulino and Roberto Albertini who performed it more than once.</p>
<h3>References</h3>
<p>The standard layered architecture is described in <a href="http://martinfowler.com/books.html#eaa">Patterns of Enterprise Application Architecture</a> by Martin Fowler, and in <a href="http://domaindrivendesign.org/books/">Domain Driven Design</a> by Eric Evans.</p>
<p>The <a href="https://alistair.cockburn.us/hexagonal-architecture/">Hexagonal architecture</a> is due to Alistair Cockburn.  Here is a <a href="https://www.youtube.com/watch?v=th4AgBcrEHA">video of Alistair explaining it</a>.</p>
<p>My collection of resources on the <a href="../../../../the-hexagonal-architecture.html">Hexagonal Architecture</a></p>
<p>A pattern similar to the hexagonal architecture is the <a href="http://jeffreypalermo.com/blog/the-onion-architecture-part-1/">Onion architecture</a> by Jeffrey Palermo.</p>
<p>Miško Hevery explains the adapter-facade combo in his post <a href="http://misko.hevery.com/2009/01/04/interfacing-with-hard-to-test-third-party-code/">Interfacing with hard-to-test third party code</a>.</p>
<p>Again Miško Hevery talks on Google Video on <a href="http://misko.hevery.com/2008/11/11/clean-code-talks-dependency-injection/">Dependency Injection</a>, part of the <em>Clean Code Talks</em> Series.</p>
<p><del datetime="2009-01-14T07:55:16+00:00">The <em>Dependency Injection</em> pattern is one form of the <a href="http://www.objectmentor.com/resources/articles/dip.pdf">Dependency Inversion Principle</a> (pdf) by Bob Martin. </del> <em>Thanks to Jacopo for pointing out that this comment of mine was wrong.</em></p>
<p><a href="http://www.manning.com/koskela/">Test Driven</a> by Lasse Koskela contains plenty of tricks about how to do integration tests in Java.</p>
<h3>Appendix: Useful snippets</h3>
<p>How to convert a String to an InputStream:</p>
<pre>new ByteArrayInputStream(string.getBytes());
</pre>
<p><a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/it/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/2.5/it/88x31.png"></a><br />
This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.5/it/">Creative Commons Attribution-Share Alike 2.5 Italy License</a>.</p>
<p>Update 2009/01/17: restored images, added CC license.<br />
Update 2009/12/09: add link to my <a href="../../../../the-hexagonal-architecture.html">Hexagonal Architecture</a> page<br />
Update 2020/01/07: fix the url for Alistair Cockburn&#8217;s page, add video</p>
				</div>

				<p class="postmetadata">Posted in <a href="../../agile.html" rel="category tag">Agile</a> |   <a href="../../../154.html#comments">12 Comments &#187;</a></p>
		</div>

				<div class="post">
				<h3 id="post-151"><a href="../../../151.html" rel="bookmark" title="Permanent Link to Reuse is overrated">Reuse is overrated</a></h3>
				<small>Sunday, December 28th, 2008</small>

				<div class="entry">
					<p>I read today somewhere in the <a href="http://xpday-london.editme.com/SessionNotes">session notes from XP Day London 2008</a></p>
<blockquote><p>	Rails ControllerViews discourage re-use all the way up to the UI.
</p></blockquote>
<p>I disagree.  It reflects a point of view that is wrong in a fundamental way.  Rails controllers tend to be very simple.  The code in the controller that responds to an action (a user clicking on a button, for instance) is usually very short, from 1 to 6 lines of code.  The code being so short, there is little value in reusing it; it&#8217;s much faster to just rewrite it.  Not copy-and-paste it, mind you: just rewrite it.  There are plenty of ways in Rails to factor out code that is common to more methods, when you want.  But the real joy of Rails is that writing the code that responds to an action is so simple, that it usually takes less than a minute to write it from scratch.  So it&#8217;s true that in a well-written Rails application many controller methods will look quite similar.  It&#8217;s OK, because readability is more important than refactoring every microscopic bit of duplication.</p>
<p>So why the concern about reuse?  Well, it comes out of the idea that writing software is <em>difficult</em>.  So when I finally get some piece of software really working, I hang on to it.  It&#8217;s precious.  It was so difficult to write that I&#8217;m afraid it would take at least as much time to rewrite it.  And I&#8217;m afraid I would not even be able to write again correctly.  And more often than not, it&#8217;s so tangled and unreadable that I&#8217;m not sure I even understand it.</p>
<p>It&#8217;s not wise to let fear be the main driver of our actions.  Let&#8217;s revert this.  Let&#8217;s start throwing away code!  The second and third time I write something, it will come out different and better.  Sure, writing software is difficult; like playing the piano is difficult, like handwriting, like riding a bike, like baking pizza.  They are all difficult activities, and they all get better with practice.  With good, proper practice.</p>
<p>Let&#8217;s <a href="http://rubyconf2008.confreaks.com/ruby-kata-and-sparring.html" title="Confreaks: RubyConf 2008">practice rewriting code</a> until it becomes so easy and so quick that the old concerns about &#8220;reuse&#8221; will become a quaint thing of the past!  </p>
				</div>

				<p class="postmetadata">Posted in <a href="../../agile.html" rel="category tag">Agile</a> |   <a href="../../../151.html#comments">3 Comments &#187;</a></p>
		</div>

				<div class="post">
				<h3 id="post-142"><a href="../../../142.html" rel="bookmark" title="Permanent Link to XP Day Benelux 2008">XP Day Benelux 2008</a></h3>
				<small>Monday, November 24th, 2008</small>

				<div class="entry">
					<p>I attended for the third year in a row the <a href="http://xpday.be/">XP Day Benelux</a>.  </p>
<h3>Prologue</h3>
<p>I arrived on Wednesday 19 early, so I spent the whole afternoon in my cozy hotel room, working on my presentation.  I was worried that it would not be a success, and rightly so, as I will explain later.</p>
<p>At about 19:00 I moved downstairs to the hotel pub.  Now, northern European are true masters of the art of the Drinking Tavern.  The tavern in question was beautiful, comfortable, with huge old tables of solid wood.  I had some great Belgian beer (Brigand).  I met Olivier, an acquaintance from last year edition, a really nice guy to talk with.  Later I met Pascal, Vera, Portia and some more people I didn&#8217;t know before.  We had a nice dinner at the hotel.</p>
<p>The next day, I was still in a hurry about my slides.  Had them printed at the hotel (well organized!)  Then I presented my talk at the Official Half Minute Presentation (ohmp), where presenters have a half minute each to entice people to come to their session.</p>
<h3><a href="http://xpday.be/Xpday2008/sessions/Responsibility Driven Design.html">Responsibility-driven Design with Mocking</a></h3>
<p>I attended first <a href="http://www.qwan.it/en">Marc, Willem and Rob</a>&#8216;s presentation on interaction-based testing.  I was a bit disappointed that there was little interaction in this session; I was hoping for some hands-on training, because I always end up with some new insight then.  It was basically a demo of the ideas in the excellent Mock Roles, Not Objects paper.  They concluded with a list of potential problems in interaction-based testing.</p>
<p>One interesting opinion came from a coach I don&#8217;t know the name of, who said that he likes to use mocks heavily as a design tool, then he usually throws away the tests and write new, state-based tests, because they are more readable and less brittle.  I have no idea if it&#8217;s a sensible thing.  I&#8217;m still not sold on the mock everything thing (I *love* my value objects.)</p>
<h3><a href="http://xpday.be/Xpday2008/sessions/Agile Metrics.html">Agile Metrics</a></h3>
<p>Next I attended Agile Metrics, by <a href="http://www.davenicolette.net/">Dave Nicolette</a>.  This also was not hands-on, except that Dave kept the audience engaged by asking us questions.  It was a nice recap of the agile thinking with regards to metrics.  I always hear that you should measure the outcome of actions chosen in the retrospective; only I don&#8217;t do that in practice.  I guess it&#8217;s one of those things you should just start doing; there&#8217;s no secret ingredient.  One nice thing about Dave&#8217;s presentation was that the use of metrics was linked to principles from the Agile manifesto.  For instance, the velocity and burndown metrics are of interest because &#8220;Working software is the primary measure of progress&#8221;.</p>
<h3><a href="http://xpday.be/Xpday2008/sessions/Mirror Mirror.html">Mirror, mirror on the wall&#8230;Why me?</a></h3>
<p>Next the nice session by <a href="http://selfishprogramming.blogspot.com/">Portia</a> and <a href="http://blog.nayima.be/">Pascal</a>.  It was mostly about thinking about the people around you, about their strengths and weaknesses (the magic mirror), and what our perception of these strengths and weaknesses tells us about what we fear and what we value (the mirror again).  And to decide one simple action that will improve our relationship with these human beings.  I got some food for thought, like how different personalities contribute to teamwork.  They concluded by revealing the Two Secrets of Teamwork, which, being secrets, I will not divulge :-)</p>
<h3><a href="http://xpday.be/Xpday2008/sessions/Invariant Game.html">The Invariant Game</a></h3>
<p>And we get to my session.  I&#8217;m afraid the material I tried to present was too difficult.  As usual when you&#8217;re beginning to teach some material, you tend to try to cover too much ground.  This was an interactive session, but the exercises were a bit too tough for the audience (except for one).  If there is a single thing that I think was a success, is the suggestion that there&#8217;s a vast space of learning that most developers, agile or not, are not aware of.  I don&#8217;t think I succeeded in giving the participants a useful tool to bring home.</p>
<p><a href='../../../../wp-content/uploads/2008/11/invariant-slides1.pdf'>Invariant Game Slides</a></p>
<p><a href='../../../../wp-content/uploads/2008/11/invariant-game-problembook.pdf'>Invariant Game Problembook</a></p>
<p>I still want to make progress in applying math to make programming more effective.  Someday I will find out how.</p>
<h3>Conclusion</h3>
<p>Olivier organized a demonstration of Aikido with his master, a kindly looking man who is probably quite deadly with his hands.  It was nice to relase the tension and do something with my body.</p>
<p>We had a fine dinner; I had a nice chat with my friend Philippe.  Then I took the train to Amsterdam with my Sourcesense collegues Marijn and Amelia, and another participant.  Amsterdam by night is beautiful: the clean air over the dark water in the channels; the Christmas lights decorating the arches of the bridges; the Dutch houses with large windows without curtains, so that you see nice paintings and bookshelves from the street.  I&#8217;m sad I could not stay the whole two days.  I&#8217;m puzzled why my session was not so useful.  I&#8217;m happy I was breathing again the energetic atmosphere of the Benelux Agile community.</p>
				</div>

				<p class="postmetadata">Posted in <a href="../../agile.html" rel="category tag">Agile</a> |   <a href="../../../142.html#comments">3 Comments &#187;</a></p>
		</div>

				<div class="post">
				<h3 id="post-140"><a href="../../../140.html" rel="bookmark" title="Permanent Link to Un altro Agile Day è passato">Un altro Agile Day è passato</a></h3>
				<small>Monday, November 24th, 2008</small>

				<div class="entry">
					<p>Un altro <a href="http://agileday.it/">Agile Day</a> è passato.</p>
<h3>Tutto di corsa</h3>
<p>Purtroppo quest&#8217;anno non ho assistito a molte sessioni; sono partito da Amsterdam con l&#8217;aereo delle 7, e sono riuscito ad arrivare a Bologna verso le 11:30, quindi dopo la sessione di apertura e il panel.  Poi quando sono arrivato, mi ha fatto un enorme piacere rivedere tante persone che non vedevo da un po&#8217;, quindi ho passato un po&#8217; di tempo a chiacchierare e un po&#8217; di tempo a completare le slide della mia presentazione.  Come risultato, al mattino non ho seguito alcuna sessione.  </p>
<h3>Retrospective, Standup and Journal</h3>
<p>Al pomeriggio ho seguito la presentazione di <a href="http://xplayer.wordpress.com/">Piero Di Bello</a> e <a href="http://jacopo.franzoi.googlepages.com/">Jacopo Franzoi</a> su &#8220;Retrospective, Standup e Journal&#8221;.  Si parlava di queste tre pratiche meno &#8220;tecniche&#8221; ma di enorme importanza nella vita del team.  Se uno vuole rendere agile un team, e dovesse scegliere di iniziare con <em>una sola pratica</em>, farebbe bene a iniziare con le retrospettive.  Perché è nella retrospettiva che il team inizia il processo di miglioramento continuo, che è uno dei due obiettivi dell&#8217;agilità.  (L&#8217;altro è &#8220;<a href="http://agilemanifesto.org/principles.html">soddisfare il cliente con rilasci rapidi e continui di software che ha valore</a>.&#8221;)  Il libro di riferimento sulle retrospettive è sempre quello di Derby e Larsen, <a href="http://www.pragprog.com/titles/dlret/agile-retrospectives">Agile Retrospectives</a>.</p>
<p>Piero e Jacopo non si sono limitati a raccontare quello che c&#8217;è nel libro; hanno raccontato episodi, pattern e antipattern vissuti nella loro esperienza di mentori, di cui ho parlato nella sessione successiva io.  Esempi di antipattern: quando non si parla (il &#8220;silenzio degli innocenti&#8221;), quando si parla troppo, e conviene rimandare le discussioni tecniche in altra sede; quando si parla delle stesse cose, e conviene cercare di smuovere lo status quo variando il formato della retrospettiva, oppure facendola meno spesso.</p>
<p>Lo stand-up meeting è un&#8217;altro momento fondamentale nella vita del team.  E&#8217; così &#8220;facile&#8221; implementarlo che si dà per scontato che tutti lo facciano bene, ma non è così.  Anche qui bisogna stare attenti ad alcune cose, di cui secondo me la più importante è che l&#8217;orario deve essere fissato e si deve assolutamente iniziare all&#8217;ora stabilita, anche se manca qualcuno.  Anche di questa pratica Piero e Jacopo hanno raccontato un po&#8217; della loro esperienza vissuta.</p>
<p>Infine hanno parlato del <em>journal</em>, ovvero il diario del team.  Questa è una pratica di cui non si parla molto in letteratura.  Piero e Jacopo l&#8217;hanno appresa lavorando nel team XPlayers in Quinary.  (Oggi lavorano con me nel <a href="http://www.sourcesense.com/it/agile/">team Orione in Sourcesense</a>.)  Nel nostro team il diario viene tenuto regolarmente.  E&#8217; un&#8217;ottima maniera di tenersi aggiornati su quello che succede nel team, di riflettere a fine giornata su quello che si è fatto, e dà <a href="http://thinkingbox.wordpress.com/2007/10/12/standup-meeting-variations/#more-27">uno spunto al mattino per lo stand-up meeting</a>.</p>
<h3>La nostra esperienza di mentoring</h3>
<p>Poi ho fatto la mia sessione, in cui ho raccontato l&#8217;esperienza degli ultimi 9 mesi del team Orione.  Abbiamo fatto due episodi di mentoring, in cui una parte del nostro team ha affiancato il team del cliente, allo scopo di trasmettere il metodo XP lavorando su un progetto vero del cliente.  I due episodi sono stati molto diversi; nel primo avevamo un team di 4 sviluppatori rumeni, dipendenti di una banca italiana.  Nel secondo avevamo un team di circa 15 sviluppatori per lo più italiani, che erano stati arruolati in &#8220;time &amp; material&#8221; da un&#8217;importante istituzione finanziaria italo-britannica per un progetto web.  Mentre nel primo caso gli orionisti erano circa metà del totale, nel secondo eravamo in netta minoranza.  La profondità della trasmissione del metodo ne risente; puoi agilizzare poche persone in profondità, oppure tante in maniera più superficiale.  Questa è una regola generale del mentoring: la tua capacità è limitata, se la rivolgi a più persone sarà più sottile.  </p>
<p>Ciononostante, l&#8217;applicazione di alcune pratiche chiave del metodo agile ha portato dei grossi benefici anche per questo cliente.  Abbiamo aiutato a creare un team coeso; a tracciare e pianificare in maniera realistica il progetto, fornendo numeri affidabili per poter prendere decisioni importanti in maniera tempestiva; a migliorare la qualità tecnica del software prodotto.</p>
<p>Sono molto d&#8217;accordo con i punti che Gabrielle Benefield ha riportato dalla sua esperienza della agilizzazione di Yahoo, che ho letto <a href="http://blog.nayima.be/2008/10/29/scandinavian-agile-2008/">sul blog di Pascal</a>:</p>
<blockquote>
<ul>
<li>Go deep Agile with a few of the most important teams, rather than spread Agile thinly over a lot of teams.</li>
<li>Technical excellence, attention to quality and good engineering practices are essential.</li>
<li>Grow slowly with teams that volunteer. Don’t overstretch your coach capacity.</li>
<li>Involve management. Inform, address fears and explain “what’s in it for them”.</li>
<li>There will always be people who don’t like or want Agile.</li>
<li>Don’t just change the process; change the structure of the company.</li>
<li>Bribe people with snacks.</li>
</ul>
</blockquote>
<h3>Processo al database relazionale</h3>
<p>Il mitico <a href="http://bo-xpug.homeip.net/">XP User Group di Bologna</a> ha presentato in forma di pantomima un argomento molto interessante: il <em>Processo al database relazionale</em>.  Con carisma di attori consumati, hanno portato in scena l&#8217;imputato (sotto forma di un cilindro di polistirolo, come viene rappresentato negli schizzi), il giudice Roberto Bertazzoni, il pubblico ministero Paolo Perrotta, l&#8217;avvocato difensore Finelli, e due testimoni!  I testimoni sono stati interrogati dalle due parti, e hanno raccontato tristi storie di stored procedure lunghe 30 pagine (in Monaco 10), o di stored procedure che prelevano frammenti di query da una tabella di query (!!!).  L&#8217;avvocato dell&#8217;accusa sembrava avere gioco facile nel dimostrare a quali disastri architetturali possa portare l&#8217;uso dissennato del database, ma l&#8217;avvocato difensore ha giustamente puntualizzato che lo strumento non ha colpa del fatto di essere utilizzato male; e che comunque i due sistemi in questione funzionano bene, e se l&#8217;imputato Sig. Relazionale Database non ci fosse, sarebbe forse più difficile ottenere gli stessi risultati.</p>
<p>L&#8217;arringa dell&#8217;accusa (introdotta da una slide che rappresentava un aringa), è stata molto convincente, con un esilarante citazione dal geek padre di noi tutti, Leonardo Da Vinci, e dei suoi consigli sull&#8217;architettura delle applicazioni.  Paolo, voglio stamparmi tutto lo scritto leonardesco su una maglietta!!  Il succo: separate le applicazioni nei tre laièri, ovvero strati, e mantenete l&#8217;intelligenza fuori dallo strato di persistenza.</p>
<p>L&#8217;arringa della difesa è stata pure molto convincente.  Usate lo strumento nella maniera appropriata.  Non ha fatto uso però di un argomento che per me è decisivo, e cioè: se non ci fosse il Sig. Relazionale a gestire l&#8217;accesso concorrente ai dati, saremmo nella cacca.  Ci toccherebbe trafficare con semafori, thread e mutex, il che secondo me, nella programmazione applicativa, è un gravissimo antipattern.  Non però nella programmazione di sistema, che è poi quella che si occupa di costruire strumenti come il Sig. Relazionale.</p>
<p>Alla fine l&#8217;imputato è stato dichiarato colpevole dalla giuria (il pubblico) di due su tre dei capi d&#8217;accusa.  </p>
<p>Mi tolgo il cappello di fronte a uno user group che è capace di a) discutere di argomenti tecnici con passione fino alle due di notte, e b) realizzare una simile messa in scena.</p>
<h3>Retrospettiva italiana</h3>
<p><a href="http://blogs.ugidotnet.org/luka/">Luca Minudel</a> ha condotto la retrospettiva italiana, in cui quelli del pubblico che applicano in pratica un metodo agile sono stati invitati a raccontare una cosa buona e una cattiva che è capitata in quest&#8217;ultimo anno.  Abbiamo lavato un po&#8217; di panni sporchi in pubblico, cosa che al pubblico magari interessava poco.  Abbiamo parlato anche di azioni che possiamo fare per migliorare la qualità della comunità agile italiana.  </p>
<p>Ci sono state diverse proposte; la migliore è stata quella di <a href="http://tommasotorti.blogspot.com/">Tommaso</a> che ha proposto un check-up fra due mesi: il 31 gennaio tutti noi siamo chiamati a scrivere un messaggio sulla mailing list extremeprogramming-it, per raccontare in che cosa è migliorata la nostra attività lavorativa dal 21 novembre.  Questa proposta mi piace perché: è semplice, attuabile, è un piccolo passo, ed è efficace; realizza un proseguimento della retrospettiva italiana.  Risponde anche al problema percepito da Simone che diceva che la mailing list è un po&#8217; smorta (davvero?  a me pare così trafficata che fatico a seguire tutto.)</p>
<p>La mia proposta era di proporre in Italia un numero maggiore di workshop di formazione, del tipo di quello di Tommaso e Fabiana sul refactoring, che è andato completo in pochi secondi da quando è stato reclamizzato.  E&#8217; evidente che c&#8217;è fame di questo tipo di eventi.  Io proporrei di fare una giornata dedicata ai workshop (ovvero a seminari di formazione pratici, dedicati a un numero limitato, tipo 20 persone.)  Si potrebbe fare o attaccata all&#8217;Agile Day dell&#8217;anno prossimo, oppure separata di circa sei mesi.  Purtroppo <a href="http://www.agilemovement.it/profile/Marco">Marco Abis</a> non è stato presente alla retrospettiva.  Mi sarebbe piaciuto sentire il suo parere.</p>
<h3>Conclusione&#8230;</h3>
<p>Mi dolgo di non avere partecipato alla canonica cena organizzata dagli amici del Bologna XPUG.  Peggio per me!  Sono felice di avere partecipato al quinto Agile Day, di avere rivisto tutti, e di avere portato un contributo.  Sono felice che il mio intervento sia stato apprezzato da tante persone.  Sono orgoglioso che tanti del mio team abbiano portato presentazioni o <a href="http://www.slideshare.net/torti.tommaso/workshop-sul-refactoring-agile-day-2008-presentation">workshop</a>.</p>
<p>Grazie a <a href="http://www.agilemovement.it/profile/Marco">Marco</a>, e tutti quanti hanno partecipato.  Cerchiamo di mantenere viva quest&#8217;energia e di migliorare sempre!</p>
				</div>

				<p class="postmetadata">Posted in <a href="../../agile.html" rel="category tag">Agile</a> |   <a href="../../../140.html#comments">1 Comment &#187;</a></p>
		</div>

				<div class="post">
				<h3 id="post-138"><a href="../../../138.html" rel="bookmark" title="Permanent Link to Che cos&#8217;è un test di accettazione?">Che cos&#8217;è un test di accettazione?</a></h3>
				<small>Saturday, November 22nd, 2008</small>

				<div class="entry">
					<p><a href="http://jacopo.franzoi.googlepages.com/">Jacopo</a> chiede: </p>
<blockquote><p>
cos&#8217;è un test di accettazione? e uno di integrazione? usiamo i sistemi veri o quelli finti?
</p></blockquote>
<p>La mia risposta: Un test di accettazione ha lo scopo di dimostrare che abbiamo capito tutto quello che c&#8217;è da fare per una storia d&#8217;uso.  Il test d&#8217;accettazione serve per</p>
<ol>
<li>dimostrare al cliente che abbiamo capito quello che chiede</li>
<li>chiedere conferma al cliente se abbiamo capito quello che chiede</li>
<li>nel processo di fare le ultime due cose, avviare un dialogo costruttivo sul cliente basato su *esempi* di come deve comportarsi il sistema.</li>
</ol>
<p>Per fare questo, non è necessario passare per l&#8217;interfaccia utente e nemmeno usare i sistemi veri; ci si può semplicemente collegare direttamente alle classi di dominio che fanno il ragionamento.</p>
<blockquote><p>
One of the most common mistakes in creating customer tests is describing what happens in the user interface rather than providing examples of business rules.  &#8230;  Good examples focus on the <em>essence</em> of your rules.  Rather than imagining how these rules might work in an application, think about what your rules are.  If you weren&#8217;t creating an application, how would you describe those rules to a collegue?  Talk about <em>things</em> rather than <em>actions</em>. &#8230; It takes a bit of practice to learn to think this way, but the results are worth it.  The tests become more compact, easier to maintain, and &#8230; faster to run.</p>
<div align="right">
  Shore and Warden, <a href="http://jamesshore.com/Agile-Book/">The Art of Agile Development</a>, p. 285.
</div>
</blockquote>
<p>Quindi un test di accettazione NON E&#8217; UNA DEMO!</p>
<p>La demo deve essere il più possibile interattiva.  Per fare una demo è utile avere una interfaccia utente con cui giocare.  Se il progetto è batch, conviene creare una mini-interfaccia molto semplice, magari basata su riga di comando, per stimolare il sistema.  Perché i nostri test di accettazione stimolano il sistema su un insieme di esempi fissato.  Invece durante la demo, e durante il test esplorativo, è importante essere in grado di provare cose diverse che ti vengono in mente e vedere rapidamente come reagisce il sistema.</p>
<blockquote><p>
Philosophically, exploratory testing is similar to test-driven development and incremental design: rather than designing a huge suite of tests up-front, you design a single test in your head, execute it against the software, and see what happens.  Ther result of each test leads you to design the next.</p>
<div align="right">
  Shore and Warden, <a href="http://jamesshore.com/Agile-Book/">The Art of Agile Development</a>, p. 345.
</div>
</blockquote>
<p>Un test di integrazione, invece è un test che <strong>prova che il nostro sistema interagisce correttamente con *un* sottosistema esterno</strong>.  Se sviluppi secondo l&#8217;<a href="http://alistair.cockburn.us/Hexagonal+architecture">architettura</a> <a href="http://jfranzoi.wordpress.com/2008/09/20/disaccoppiamento-inversione-delle-dipendenze-e-architetture-esagonali/">esagonale</a>, il test di accettazione verifica l&#8217;implementazione corretta di *un* lato dell&#8217;esagono.</p>
<p>Un test di integrazione end-to-end, invece, testa il sistema tutto, con i suoi collaboratori esterni, dall&#8217;interfaccia utente.  In molti casi il test end-to-end non conviene; perché è lento, fragile e difficile da manutenere.  I test di integrazione focalizzati, insieme ai test unitari e ai test di integrazione, sono di solito sufficienti a darmi una buona confidenza sulla qualità del mio sistema.  Ma soprattutto, il test di integrazione end-to-end non è efficace come il test esplorativo.  Magari il test end-to-end è verde, ma appena provo a usare il sistema in maniera interattiva va tutto a pezzi.</p>
<blockquote><p>
Instead of end-to-end tests, use exploratory testing to check the effectiveness of your unit and integration tests.  When your exploratory tests find a problem, use that information to improve your approach to unit and integration testing, rather than introduce end-to-end tests.</p>
<div align="right">
  Shore and Warden, <a href="http://jamesshore.com/Agile-Book/">The Art of Agile Development</a>, p. 305.
</div>
</blockquote>
				</div>

				<p class="postmetadata">Posted in <a href="../../agile.html" rel="category tag">Agile</a> |   <a href="../../../138.html#comments">3 Comments &#187;</a></p>
		</div>

				<div class="post">
				<h3 id="post-137"><a href="../../../137.html" rel="bookmark" title="Permanent Link to Pair programming antipattern: discussing design">Pair programming antipattern: discussing design</a></h3>
				<small>Wednesday, November 19th, 2008</small>

				<div class="entry">
					<p>There&#8217;s a place to discuss design, but a pair programming session is not it.  Pair programming is about <em>programming</em>.  Sometimes I see developers stop typing and debating endlessly on how to do things.  Sometimes, when I do pair programming (yes, I still get to do some coding sometimes) I hear my pair stopping me with objections, usually about design.  &#8220;You&#8217;re going to introduce an IF!&#8221;.  Yes.  Definitely.  I know that.  But I&#8217;m not going to discuss that with you right now!  </p>
<p>When I have a good idea of how to progress, I just do it.  There&#8217;s no need to stop me to discuss my style; that will only take away energy from me.  Let the code speak: if my idea is right, the pieces will fall together nicely and then we&#8217;ll decide if it&#8217;s worth introducing more design to get rid of the IF.  If my idea is not so good, then the code will speak by itself.  Suppose the pomodoro rings, and we realize I&#8217;m going nowhere; when we start the next pomodoro we toss my code, start afresh, and try some other way.  </p>
<p>Maybe my pair thinks I&#8217;m going nowhere.  If she&#8217;s quick enough to grab the keyboard from me, she can try another way.  Let the code speak!</p>
<p>This does not, I repeat <strong>does not</strong> mean you should treat your pair disrespectfully.  It is a completely different matter when my pair does not understand what I&#8217;m doing.  It&#8217;s my responsibility to explain, with clarity and patience, what I&#8217;m trying to do.  But!  If my pair thinks he understand but wishes I tried some other way, then there&#8217;s two possibilities: either he will be patient and wait to see if I&#8217;m getting somewhere; or he&#8217;ll grab the keyboard from me and try another way.</p>
<p>There&#8217;s a place for design discussions; the best place in my opinion is in front of the whiteboard (and maybe with a cup of tea in hand.)  Design discussions are good to clarify longer term goals and issues; or to explain and reason about domain difficulties.  But when I&#8217;m at the keyboard, then the code is my whiteboard.  Let the code speak!</p>
<p><em><br />
The idea of &#8220;grabbing the keyboard&#8221; I learned from <a href="http://ilconsigliodelcoach.wordpress.com/">Francesco Cirillo</a> (good luck trying to grab the keyboard from him!)  See also his post <a href="http://ilconsigliodelcoach.wordpress.com/2008/05/27/mamma-programming/">Mamma Programming</a>.<br />
</em></p>
				</div>

				<p class="postmetadata">Posted in <a href="../../agile.html" rel="category tag">Agile</a> |   <a href="../../../137.html#comments">9 Comments &#187;</a></p>
		</div>

				<div class="post">
				<h3 id="post-136"><a href="../../../136.html" rel="bookmark" title="Permanent Link to Un&#8217;incontro per i dirigenti IT">Un&#8217;incontro per i dirigenti IT</a></h3>
				<small>Wednesday, November 19th, 2008</small>

				<div class="entry">
					<p>Credo che oggi tutti i manager dell&#8217;IT, se non hanno tenuto di proposito la testa sotto la sabbia negli ultimi 9 anni, abbiano sentito parlare in abbondanza dei &#8220;Metodi Agili&#8221;.  Questi metodi nel nostro Paese non sono ancora diffusi come nel mondo anglosassone; quindi i metodi agili sono conosciuti dai più per sentito dire; non tutti hanno avuto l&#8217;occasione di incontrare persone che li applicano veramente.  Inoltre gli agilisti sono per lo più sviluppatori, e quando organizzano (organizziamo) un incontro, di solito è dedicato ad altri sviluppatori.</p>
<p>Ora, il problema è che è fin troppo facile avere una percezione inesatta, o anche distorta, di che cosa siano i metodi agili, e di perché sono importanti per tutte le persone che tengono al successo dei propri progetti software.  Anche e soprattutto i manager.  Per questo <a href="http://www.sourcesense.com/">Sourcesense</a> organizza un incontro dedicato ai manager IT.</p>
<p>Il 25 novembre si terrà a Milano <a href="http://www.sourcesense.com/it/pranzo-con-jboss/">una colazione di lavoro in cui Sourcesense, in partnership con Red Hat, introdurrà l&#8217;argomento Metodi Agili</a>.  In quell&#8217;occasione avrò modo di spiegare ai manager presenti che cosa intendo io per Metodi Agili, e perché sono importanti.  Le mie credenziali, per parlare di questo argomento, sono il lavoro di <a href="http://www.sourcesense.com/it/agile/">coaching</a>, mentoring e <a href="http://essap.dicom.uninsubria.it/">training</a> che ho fatto negli ultimi 3 anni.</p>
<p>Per partecipare, basta visitare <a href="http://www.sourcesense.com/it/pranzo-con-jboss/">la pagina dedicata all&#8217;incontro</a> e mandare la richiesta di partecipazione.  </p>
				</div>

				<p class="postmetadata">Posted in <a href="../../agile.html" rel="category tag">Agile</a> |   <a href="../../../136.html#respond">No Comments &#187;</a></p>
		</div>

				<div class="post">
				<h3 id="post-135"><a href="../../../135.html" rel="bookmark" title="Permanent Link to Project tracking is a lie (in the waterfall)">Project tracking is a lie (in the waterfall)</a></h3>
				<small>Wednesday, November 5th, 2008</small>

				<div class="entry">
					<p>Some time ago <a href="http://www.davenicolette.net/agile/">Dave Nicolette</a> expressed so well something that I was aware of but could not formulate clearly.  That is, in traditional waterfall projects the percent-completes are a lie; all they tell you is how much time is passed since the time the project started, and that is the only metric that a traditional project manager, armed with his shining copy of Microsoft Project, is tracking.</p>
<p>So please jump to <a href="http://dnicolet1.tripod.com/agile/index.blog/1852857/project-tracking-traditional-vs-agile/">Dave&#8217;s blog post</a> and read about it!</p>
				</div>

				<p class="postmetadata">Posted in <a href="../../agile.html" rel="category tag">Agile</a> |   <a href="../../../135.html#comments">1 Comment &#187;</a></p>
		</div>

				<div class="post">
				<h3 id="post-134"><a href="../../../134.html" rel="bookmark" title="Permanent Link to Java anti-pattern: splitting the project into multiple projects">Java anti-pattern: splitting the project into multiple projects</a></h3>
				<small>Saturday, November 1st, 2008</small>

				<div class="entry">
					<p>Don&#8217;t <strong style="font-style: italic">split your project into multiple separate projects</strong> unless absolutely necessary.  By this I mean, don&#8217;t have a separate &#8220;model&#8221; project that produces a project-model.jar, an &#8220;infrastructure&#8221; project that contains data-access objects, a &#8220;web application&#8221; project that contains the user interface of the application, and so on.  This breaking down the project in subprojects </p>
<ol>
<li>increases complexity a lot, </li>
<li>makes integration longer and more difficult,</li>
<li>is an obstacle to the evolution of the design, </li>
<li>and results in a <em>lot</em> of work being spent on the build system.</li>
</ol>
<p>With multiple projects it happens that you do work in one project, and the other projects don&#8217;t &#8220;see&#8221; your latest modifications.  Perhaps your application works properly when tested within Eclipse, but fails to compile in the command line, because some of the jars are not up-to-date.  This sort of things drives people to introduce things like Maven or Ivy in the project, and that brings a <em>lot</em> of additional complexity.  Maven and Ivy are very complex tools.  They tend to look for jars all over the world at every build,  making integration slow, difficult to understand and unreliable.  I&#8217;ve seen project that require from one to two hours just for integrating your changes into the repo, and that assuming that you&#8217;re skilled in working with the build process.  All of this has <em>nothing</em> to do with producing value for the customer.</p>
<p>It&#8217;s just too easy to spend lots of time building complex infrastructure.  Don&#8217;t do that: spend time thinking how to <em>simplify</em> things instead.  Think about how to produce value for the customer.  Think about how to obtain the desired result with less complexity.</p>
<div class="golden_rule" style="border: 3px dashed #FFB90F; padding: 2em;">Tip: instead of splitting your project, keep all your code in a single project.  Packages and source folders are the proper tools for keeping layers and modules separate.
</div>
<p>Within the multiple-projects antipattern, there&#8217;s a second, minor antipattern, that is the <strong  style="font-style: italic">trunk, tags and branches folders everywhere</strong> antipattern.  By this I mean that each and every one of your sub-projects has its own triad of trunk, tags and branches directories.  Even assuming that we&#8217;re going to need these three directories, they should appear only once, at the very top of the tree of subprojects.  It you do it like this, the triad will not get in the way: I can checkout the trunk once, and I will have a single, complete and consistent tree to work with.  If every project has its own separate triad, there&#8217;s no easy way to manipulate the whole tree of projects without including tags and branches.  No easy checkout, no easy update, etc.</p>
<div class="golden_rule" style="border: 3px dashed #FFB90F; padding: 2em;">
  Tip: <a href="http://www.jroller.com/bokmann/entry/questioning_subversion_practices">avoid</a> the &#8220;trunk, branches, tags&#8221; triad if you can.  But if you must have them, put them at the very top of your source tree; never work with more than one triad.
</div>
<p>Now I hear you ask: &#8220;But what if I cannot keep all of my code in a single project?  What if I have to produce two versions of my application?  What if I have to produce more than one application sharing most of the codebase?&#8221;</p>
<p>Even so, dear reader, my advice does not change.  I would generate multiple apps from the same single project.  I would write a separate ant task to build each version of the app; my ant tasks would pick and choose the pieces that are needed for a particular app.  Very simple.  I know that this goes against the pattern &#8220;one artifact per project&#8221; pattern.  So be it; I don&#8217;t think it&#8217;s a particularly valuable pattern, expecially since it leads the way to the introduction of complex build systems like Maven.</p>
<p>&#8220;But you&#8217;re going to end up with a messy, complicated, unreadable ant buildfile!&#8221; you say.  I don&#8217;t think so, dear reader.  There is a danger of making a mess of the ant buildfiles, but then again this is the usual danger of making a mess of your software.  The same care and skill that is required to write simple, high quality source code <em>must</em> be applied to the buildfiles.  In my experience, with some care, I can keep my ant buildfiles pretty lean.</p>
<p>&#8220;But I have a legacy system, full of separate projects!&#8221;  In that and other cases,  when it&#8217;s impossible to keep all the code in a single project, you can get by with a relatively simple buildfile.  All you need to do in the buildfile is to explicitly invoke the build on all the projects it depends on.  This will increase the complexity of your buildfiles, but not dramatically so.  It&#8217;s made easier if you can rely on all of the subprojects being at predictable positions within your working directory.  Otherwise, you can cope by defining environment variables or per-developer configuration files that help ant find the projects it depends on. </p>
<p>&#8220;But my situation is different!  I <em>need</em> Maven!&#8221;  Dear reader, I won&#8217;t tell you what you need in <em>your</em> situation.  You are the only person in a position to know that.  This advice worked for me.   My bet is that in almost every situation Maven or Ivy could be profitably replaced by a simpler scheme, <em>if</em> you really care about keeping complexity down, <em>and</em> are willing to spend time and thought for that.</p>
				</div>

				<p class="postmetadata">Posted in <a href="../../agile.html" rel="category tag">Agile</a> |   <a href="../../../134.html#comments">11 Comments &#187;</a></p>
		</div>

				<div class="post">
				<h3 id="post-132"><a href="../../../132.html" rel="bookmark" title="Permanent Link to Lessons learned on writing acceptance tests">Lessons learned on writing acceptance tests</a></h3>
				<small>Tuesday, October 14th, 2008</small>

				<div class="entry">
					<p>Yesterday I was working with <a href="http://jacopo.franzoi.googlepages.com/">Jacopo</a> on finishing up the acceptance tests for a story.  The story was something like &#8220;as a user, I want to see a page with a list of the email alerts I subscribed to.&#8221;  The test looked like this:</p>
<pre>
<code>
@Test
public void shouldShowAlerts() throws Exception {
    Date today = new Date();
    String vodafone6wayKey = "...";
    alertEngineNewsBroker.store(new IndividualCompanyRule(...));
    
    WebResponse response = getResponse("/xxx/alerts/all.html");
    
    WebTable details = response.getTableWithID("details");
    assertEquals("Type", details.getCellAsText(0, 0));
    assertEquals("Name", details.getCellAsText(0, 2));
    assertEquals("Details", details.getCellAsText(0, 3));
    
    assertEquals("News", details.getCellAsText(1, 0)); //type
    assertTrue(isSameDay(today, dateFrom(details.getCellAsText(1, 1))));
    assertEquals("VODAFONE GRP.", details.getCellAsText(1, 2));
    assertEquals("All news stories", details.getCellAsText(1, 3));
}    
</code>
</pre>
<p>This acceptance test was going to be implemented with an end-to-end test running through the http interface of the web application.  But I also saw that my collegue had this table sketched on his copybook.  </p>
<p><a href='../../../../wp-content/uploads/2008/10/sketch-at-table-800x472.jpg'><img src="../../../../wp-content/uploads/2008/10/sketch-at-table-800x472-300x177.jpg" alt="Sketch of AT Table" title="Sketch AT Table" width="300" height="177" class="alignnone size-medium wp-image-133" srcset="http://matteo.vaccari.name/blog/wp-content/uploads/2008/10/sketch-at-table-800x472-300x177.jpg 300w, http://matteo.vaccari.name/blog/wp-content/uploads/2008/10/sketch-at-table-800x472.jpg 800w" sizes="(max-width: 300px) 100vw, 300px" /></a></p>
<p>The sketch was written during a conversation with the analyst, who in this project acts as the customer role.  It represents the text labels that the analyst expects to see in the various cases.</p>
<p>It was going to be difficult to extend the above test to cover all the cases.  Also, the shape of the test was wildly different from the concepts that the sketch table makes so clear.  We thought about how we would set up this acceptance test in Fitnesse, which we are not using in this project.  From there we got the inspiration to write the test like this:</p>
<pre>
<code>
@Test
public void shouldShowAlertNames() throws Exception {
    assertNameIs("VODAFONE GRP.", new IndividualCompanyRule(...));
    assertNameIs("ALL", new AllCompaniesRule(...));
    assertNameIs("FTSE 100", new IndexRule(...));
    assertNameIs("General Financial", new SectorRule(...));
    assertNameIs("DELL INC", new NotListedCompanyRule(...));
    assertNameIs("Nome di watchlist", new WatchlistRule(...));
    assertNameIs("Nome di portfolio", new PortfolioRule(...));
}
</code>
</pre>
<p>Now the test, while still containing a lot of technical clutter, has roughly the same shape of the sketch.  All that remains is to implement the <em>custom assertion</em>, <code>assertNameIs</code>.  One option was to call the code from the first test; but going through http and html seems a useless detour, when all we care about is the text displayed in different cases.  Why not hook directly into the business logic that produces the label?  This way the test is much more focused; and fast too.</p>
<p>We had unit tests already for that business logic; we agreed to have a bit of duplication in the tests, because the way the AT was written was more communicative in the eyes of the customer.</p>
<p>Jacopo was not happy, though, that we were ditching the end-to-end test completely.  This way there was no test that shows that our page shows up at all.  We agreed that we would keep one end-to-end test: no need to test all possible cases, since that is already covered in the previous test.</p>
<p>Lessons learned:</p>
<ul>
<li>When the business logic is complex enough that you must write down details and lists of cases, it&#8217;s a good idea to write a test explicitly for testing the business logic.</li>
<li>Acceptance tests work better when they are clear and uncluttered, focused on the aspect of the story that we want to demonstrate to the customer.  Fitnesse-style tables and custom assertions are useful tools here.</li>
<li>End-to-end integration tests can take an awful lot of time to write.  <a href="http://jamesshore.com/Agile-Book/">Shore and Warden</a> suggest to avoid them, relying instead on what they call <em>focused integration tests</em>, that is, tests that check the interaction with a <em>single</em> external system, rather than a complete tour from GUI to DB and back.  Shore says that it&#8217;s more productive to test the UI interactively (which you <em>have</em> to do anyway) and uncover with <em>exploratory tests</em> any holes that your focused integration tests don&#8217;t cover.  Then you refine your focused integration tests.  <a href="http://www.manning.com/koskela/">Koskela</a> says that using end-to-end test, or going divide-and-conquer with focused integration tests, is a judgment call: &#8220;it depends&#8221;.</li>
<li>Always time-box your activities.  If you expected to spend, say, 4 pomodori on implementing ATs, and after that time you are still far from done, don&#8217;t just plow ahead and take as much time as it will ever take.  Stop and reflect, ask for help, and come up with a simpler way.  Do ask for help; and start over, trying to <strong>get the same value in a simpler way</strong>.  See this from Francesco Cirillo: <a href="http://www.xplabs.it/fc9.html">Quando la coppia scoppia</a> (in Italian).</li>
</ul>
				</div>

				<p class="postmetadata">Posted in <a href="../../agile.html" rel="category tag">Agile</a> |   <a href="../../../132.html#comments">1 Comment &#187;</a></p>
		</div>

		
		<div class="navigation">
			<div class="alignleft"><a href="14.html" >&laquo; Previous Entries</a></div>
			<div class="alignright"><a href="12.html" >Next Entries &raquo;</a></div>
		</div>

	  	</div>

  <div id='right-col'>
        <div id="sidebar">
    <ul>

      <li>
        <form method="get" id="searchform" action="http://matteo.vaccari.name/blog/">
  <div>
    <input tabindex="1" type="text" value="" name="s" id="s" />
    <input type="submit" id="searchsubmit" value="Search" />
  </div>
</form>
      </li>

      <li>

        <h2>About</h2>

	I am a software developer working with <a href="http://thoughtworks.com/">Thoughtworks Italia</a>.
        I'm a fan of <a
        href="http://extremeprogramming.org/">Extreme Programming</a>.
        I&nbsp;helped organize the <a
        href="http://essap.dicom.uninsubria.it/">European Summer School on
        Agile Programming</a>

      </li>

      <li>
            <p>You are currently browsing the archives for the Agile category.</p>

            </li>

      <li class="pagenav"><h2>Pages</h2><ul><li class="page_item page-item-851"><a href="../../../../selected-tdd-resources-to-start.html">Selected TDD Resources To Start</a></li>
<li class="page_item page-item-583"><a href="../../../../tdd-resources.html">TDD Resources</a></li>
<li class="page_item page-item-247"><a href="../../../../the-hexagonal-architecture.html">The Hexagonal Architecture</a></li>
</ul></li>

      
      <li><h2>Archives</h2>
        <ul>
        	<li><a href='../../../date/2018/10.html'>October 2018</a></li>
	<li><a href='../../../date/2017/09.html'>September 2017</a></li>
	<li><a href='../../../date/2016/08.html'>August 2016</a></li>
	<li><a href='../../../date/2016/03.html'>March 2016</a></li>
	<li><a href='../../../date/2016/01.html'>January 2016</a></li>
	<li><a href='../../../date/2014/12.html'>December 2014</a></li>
	<li><a href='../../../date/2014/10.html'>October 2014</a></li>
	<li><a href='../../../date/2014/06.html'>June 2014</a></li>
	<li><a href='../../../date/2014/02.html'>February 2014</a></li>
	<li><a href='../../../date/2013/12.html'>December 2013</a></li>
	<li><a href='../../../date/2013/11.html'>November 2013</a></li>
	<li><a href='../../../date/2013/06.html'>June 2013</a></li>
	<li><a href='../../../date/2013/05.html'>May 2013</a></li>
	<li><a href='../../../date/2013/03.html'>March 2013</a></li>
	<li><a href='../../../date/2013/02.html'>February 2013</a></li>
	<li><a href='../../../date/2012/10.html'>October 2012</a></li>
	<li><a href='../../../date/2012/08.html'>August 2012</a></li>
	<li><a href='../../../date/2012/07.html'>July 2012</a></li>
	<li><a href='../../../date/2012/06.html'>June 2012</a></li>
	<li><a href='../../../date/2012/05.html'>May 2012</a></li>
	<li><a href='../../../date/2012/04.html'>April 2012</a></li>
	<li><a href='../../../date/2012/01.html'>January 2012</a></li>
	<li><a href='../../../date/2011/12.html'>December 2011</a></li>
	<li><a href='../../../date/2011/11.html'>November 2011</a></li>
	<li><a href='../../../date/2011/10.html'>October 2011</a></li>
	<li><a href='../../../date/2011/07.html'>July 2011</a></li>
	<li><a href='../../../date/2011/06.html'>June 2011</a></li>
	<li><a href='../../../date/2011/05.html'>May 2011</a></li>
	<li><a href='../../../date/2011/04.html'>April 2011</a></li>
	<li><a href='../../../date/2011/03.html'>March 2011</a></li>
	<li><a href='../../../date/2011/02.html'>February 2011</a></li>
	<li><a href='../../../date/2010/11.html'>November 2010</a></li>
	<li><a href='../../../date/2010/10.html'>October 2010</a></li>
	<li><a href='../../../date/2010/09.html'>September 2010</a></li>
	<li><a href='../../../date/2010/08.html'>August 2010</a></li>
	<li><a href='../../../date/2010/07.html'>July 2010</a></li>
	<li><a href='../../../date/2010/06.html'>June 2010</a></li>
	<li><a href='../../../date/2010/05.html'>May 2010</a></li>
	<li><a href='../../../date/2010/04.html'>April 2010</a></li>
	<li><a href='../../../date/2010/03.html'>March 2010</a></li>
	<li><a href='../../../date/2010/02.html'>February 2010</a></li>
	<li><a href='../../../date/2010/01.html'>January 2010</a></li>
	<li><a href='../../../date/2009/12.html'>December 2009</a></li>
	<li><a href='../../../date/2009/11.html'>November 2009</a></li>
	<li><a href='../../../date/2009/10.html'>October 2009</a></li>
	<li><a href='../../../date/2009/09.html'>September 2009</a></li>
	<li><a href='../../../date/2009/07.html'>July 2009</a></li>
	<li><a href='../../../date/2009/05.html'>May 2009</a></li>
	<li><a href='../../../date/2009/04.html'>April 2009</a></li>
	<li><a href='../../../date/2009/03.html'>March 2009</a></li>
	<li><a href='../../../date/2009/02.html'>February 2009</a></li>
	<li><a href='../../../date/2009/01.html'>January 2009</a></li>
	<li><a href='../../../date/2008/12.html'>December 2008</a></li>
	<li><a href='../../../date/2008/11.html'>November 2008</a></li>
	<li><a href='../../../date/2008/10.html'>October 2008</a></li>
	<li><a href='../../../date/2008/09.html'>September 2008</a></li>
	<li><a href='../../../date/2008/07.html'>July 2008</a></li>
	<li><a href='../../../date/2008/06.html'>June 2008</a></li>
	<li><a href='../../../date/2008/05.html'>May 2008</a></li>
	<li><a href='../../../date/2008/04.html'>April 2008</a></li>
	<li><a href='../../../date/2008/01.html'>January 2008</a></li>
	<li><a href='../../../date/2007/11.html'>November 2007</a></li>
	<li><a href='../../../date/2007/10.html'>October 2007</a></li>
	<li><a href='../../../date/2007/09.html'>September 2007</a></li>
	<li><a href='../../../date/2007/06.html'>June 2007</a></li>
	<li><a href='../../../date/2007/05.html'>May 2007</a></li>
	<li><a href='../../../date/2007/04.html'>April 2007</a></li>
	<li><a href='../../../date/2007/03.html'>March 2007</a></li>
	<li><a href='../../../date/2007/02.html'>February 2007</a></li>
	<li><a href='../../../date/2007/01.html'>January 2007</a></li>
	<li><a href='../../../date/2006/12.html'>December 2006</a></li>
	<li><a href='../../../date/2006/11.html'>November 2006</a></li>
	<li><a href='../../../date/2006/10.html'>October 2006</a></li>
	<li><a href='../../../date/2006/09.html'>September 2006</a></li>
	<li><a href='../../../date/2006/08.html'>August 2006</a></li>
	<li><a href='../../../date/2006/07.html'>July 2006</a></li>
	<li><a href='../../../date/2006/06.html'>June 2006</a></li>
	<li><a href='../../../date/2006/05.html'>May 2006</a></li>
	<li><a href='../../../date/2006/04.html'>April 2006</a></li>
	<li><a href='../../../date/2006/03.html'>March 2006</a></li>
	<li><a href='../../../date/2006/02.html'>February 2006</a></li>
	<li><a href='../../../date/2006/01.html'>January 2006</a></li>
        </ul>
      </li>

      <li><h2>Categories</h2>
        <ul>
        	<li class="cat-item cat-item-1 current-cat"><a href="../../agile.html" >Agile</a> (229)
</li>
	<li class="cat-item cat-item-3"><a href="../../books.html" >Books</a> (2)
</li>
	<li class="cat-item cat-item-11"><a href="../../design-exercise.html" >Design Exercise</a> (5)
</li>
	<li class="cat-item cat-item-6"><a href="../../essay.html" >Essay</a> (13)
</li>
	<li class="cat-item cat-item-8"><a href="../../expressive-code.html" >Expressive Code</a> (11)
</li>
	<li class="cat-item cat-item-10"><a href="../../fundamentals.html" >Fundamentals</a> (6)
</li>
	<li class="cat-item cat-item-9"><a href="../../other.html" >other</a> (1)
</li>
        </ul>
      </li>

      
    </ul>
  </div>

    </div>
  </div>
</div>


<hr />
<div id="footer">
<address>
  <script type="text/javascript">eval(unescape('%64%6f%63%75%6d%65%6e%74%2e%77%72%69%74%65%28%27%3c%61%20%68%72%65%66%3d%22%6d%61%69%6c%74%6f%3a%76%61%63%63%61%72%69%40%70%6f%62%6f%78%2e%63%6f%6d%22%3e%76%61%63%63%61%72%69%40%70%6f%62%6f%78%2e%63%6f%6d%3c%2f%61%3e%27%29%3b'))</script>
</address>
</div>
</div>
  <script type='text/javascript' src='../../../../wp-includes/js/wp-embed.min3c21.js?ver=5.1.1'></script>
</body>

<!-- Mirrored from matteo.vaccari.name/blog/archives/category/agile/page/13 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 24 Sep 2021 10:31:56 GMT -->
</html>
